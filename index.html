<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Waste Hero - ‡∏Æ‡∏µ‡πÇ‡∏£‡πà‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .game-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 226, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .neon-glow {
            box-shadow: 0 0 20px rgba(255, 182, 193, 0.6);
            animation: neonPulse 2s ease-in-out infinite alternate;
        }
        
        @keyframes neonPulse {
            from { box-shadow: 0 0 20px rgba(255, 182, 193, 0.6); }
            to { box-shadow: 0 0 30px rgba(255, 182, 193, 0.9), 0 0 40px rgba(255, 182, 193, 0.4); }
        }
        
        .dark-theme {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }
        
        .dark-theme .game-container {
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        #achievementPopup.show {
  opacity: 1;
  pointer-events: auto;
}
    </style>
</head>
<body>
  <div id="achievementPopup" class="fixed bottom-4 right-4 bg-yellow-300 bg-opacity-90 text-yellow-900 rounded-lg shadow-lg px-4 py-3 text-sm font-bold opacity-0 pointer-events-none transition-opacity duration-500 z-50 flex items-center space-x-2">
    <span id="achievementIcon" class="text-xl"></span>
    <span id="achievementText"></span>
</div>
    <div class="game-container min-h-screen relative overflow-hidden">
        <!-- Start Screen -->
        <div id="startScreen" class="absolute inset-0 flex flex-col items-center justify-center p-4 overflow-y-auto relative z-10">
            <!-- Floating Elements -->
            <div class="absolute top-10 left-10 text-2xl opacity-60 floating" style="animation-delay: 0s;">
                <svg width="40" height="40" viewBox="0 0 40 40">
                    <g>
                        <!-- ‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó‡∏ï‡∏±‡∏ß -->
                        <path d="M20 8 L25 25 L15 25 Z" fill="#FF8C00" stroke="#FF6B00" stroke-width="1"/>
                        <!-- ‡πÉ‡∏ö‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó -->
                        <path d="M18 8 Q16 4 14 6 Q16 5 18 8" fill="#32CD32"/>
                        <path d="M22 8 Q24 4 26 6 Q24 5 22 8" fill="#32CD32"/>
                        <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                        <circle cx="18" cy="15" r="1.5" fill="#000"/>
                        <circle cx="22" cy="15" r="1.5" fill="#000"/>
                        <path d="M17 18 Q20 20 23 18" stroke="#000" stroke-width="1" fill="none"/>
                        <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                        <circle cx="12" cy="18" r="2" fill="#FFB366"/>
                        <circle cx="28" cy="18" r="2" fill="#FFB366"/>
                        <circle cx="17" cy="28" r="2" fill="#FFB366"/>
                        <circle cx="23" cy="28" r="2" fill="#FFB366"/>
                    </g>
                </svg>
            </div>
            <div class="absolute top-20 right-16 text-xl opacity-50 floating" style="animation-delay: 1s;">
                <svg width="35" height="35" viewBox="0 0 35 35">
                    <g>
                        <!-- ‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡∏ï‡∏±‡∏ß -->
                        <circle cx="17.5" cy="20" r="10" fill="#FF6347"/>
                        <!-- ‡πÉ‡∏ö‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏® -->
                        <path d="M12 10 Q10 8 8 10 Q10 9 12 10" fill="#228B22"/>
                        <path d="M17.5 10 Q15.5 8 13.5 10 Q15.5 9 17.5 10" fill="#228B22"/>
                        <path d="M23 10 Q21 8 19 10 Q21 9 23 10" fill="#228B22"/>
                        <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                        <circle cx="14" cy="17" r="1.2" fill="#000"/>
                        <circle cx="21" cy="17" r="1.2" fill="#000"/>
                        <path d="M14 21 Q17.5 23 21 21" stroke="#000" stroke-width="1" fill="none"/>
                        <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                        <circle cx="8" cy="20" r="1.8" fill="#FF8C69"/>
                        <circle cx="27" cy="20" r="1.8" fill="#FF8C69"/>
                        <circle cx="14" cy="32" r="1.8" fill="#FF8C69"/>
                        <circle cx="21" cy="32" r="1.8" fill="#FF8C69"/>
                    </g>
                </svg>
            </div>
            <div class="absolute bottom-32 left-8 text-lg opacity-40 floating" style="animation-delay: 2s;">
                <svg width="30" height="30" viewBox="0 0 30 30">
                    <g>
                        <!-- ‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏ï‡∏±‡∏ß -->
                        <ellipse cx="15" cy="20" rx="8" ry="6" fill="#90EE90"/>
                        <!-- ‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î -->
                        <path d="M10 15 Q8 10 6 12 Q8 11 10 15" fill="#228B22"/>
                        <path d="M15 12 Q13 7 11 9 Q13 8 15 12" fill="#228B22"/>
                        <path d="M20 15 Q22 10 24 12 Q22 11 20 15" fill="#228B22"/>
                        <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                        <circle cx="12" cy="18" r="1" fill="#000"/>
                        <circle cx="18" cy="18" r="1" fill="#000"/>
                        <path d="M12 21 Q15 22.5 18 21" stroke="#000" stroke-width="0.8" fill="none"/>
                        <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                        <circle cx="6" cy="20" r="1.5" fill="#98FB98"/>
                        <circle cx="24" cy="20" r="1.5" fill="#98FB98"/>
                        <circle cx="12" cy="28" r="1.5" fill="#98FB98"/>
                        <circle cx="18" cy="28" r="1.5" fill="#98FB98"/>
                    </g>
                </svg>
            </div>
            <div class="absolute bottom-20 right-12 text-2xl opacity-50 floating" style="animation-delay: 0.5s;">
                <svg width="40" height="40" viewBox="0 0 40 40">
                    <g>
                        <!-- ‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß -->
                        <rect x="17" y="25" width="6" height="10" fill="#8FBC8F" rx="3"/>
                        <!-- ‡πÉ‡∏ö‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô -->
                        <path d="M20 25 Q15 20 12 22 Q15 21 20 25" fill="#32CD32"/>
                        <path d="M20 25 Q25 20 28 22 Q25 21 20 25" fill="#32CD32"/>
                        <path d="M20 22 Q18 17 16 19 Q18 18 20 22" fill="#228B22"/>
                        <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                        <circle cx="18" cy="28" r="1" fill="#000"/>
                        <circle cx="22" cy="28" r="1" fill="#000"/>
                        <path d="M17 31 Q20 32.5 23 31" stroke="#000" stroke-width="0.8" fill="none"/>
                        <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                        <circle cx="12" cy="30" r="1.5" fill="#9ACD32"/>
                        <circle cx="28" cy="30" r="1.5" fill="#9ACD32"/>
                        <circle cx="17" cy="37" r="1.5" fill="#9ACD32"/>
                        <circle cx="23" cy="37" r="1.5" fill="#9ACD32"/>
                    </g>
                </svg>
            </div>
            
            <!-- Header -->
            <div class="text-center mb-8 bounce-in">
                <div class="relative">
                    <div class="mb-4 floating">
                        <svg width="140" height="140" viewBox="0 0 140 140" class="mx-auto">
                            <g>
                                <!-- ‡∏ï‡∏±‡∏ß‡∏´‡∏°‡∏µ‡πÅ‡∏û‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡πâ‡∏≠‡∏¢ -->
                                <circle cx="70" cy="70" r="35" fill="#F0F0F0" stroke="#E0E0E0" stroke-width="2"/>
                                
                                <!-- ‡∏´‡∏π‡πÅ‡∏û‡∏ô‡∏î‡πâ‡∏≤ -->
                                <circle cx="50" cy="45" r="12" fill="#2C2C2C"/>
                                <circle cx="90" cy="45" r="12" fill="#2C2C2C"/>
                                <circle cx="52" cy="47" r="6" fill="#FFB6C1"/>
                                <circle cx="88" cy="47" r="6" fill="#FFB6C1"/>
                                
                                <!-- ‡∏£‡∏≠‡∏ö‡∏ï‡∏≤ -->
                                <ellipse cx="58" cy="60" rx="8" ry="10" fill="#2C2C2C"/>
                                <ellipse cx="82" cy="60" rx="8" ry="10" fill="#2C2C2C"/>
                                
                                <!-- ‡∏ï‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å -->
                                <circle cx="58" cy="60" r="6" fill="#FFF"/>
                                <circle cx="82" cy="60" r="6" fill="#FFF"/>
                                <circle cx="58" cy="60" r="4" fill="#2C2C2C"/>
                                <circle cx="82" cy="60" r="4" fill="#2C2C2C"/>
                                <circle cx="59" cy="58" r="2" fill="#FFF"/>
                                <circle cx="83" cy="58" r="2" fill="#FFF"/>
                                <circle cx="60" cy="59" r="0.8" fill="#FFF"/>
                                <circle cx="84" cy="59" r="0.8" fill="#FFF"/>
                                
                                <!-- ‡∏à‡∏°‡∏π‡∏Å‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à -->
                                <path d="M70 75 Q67 72 65 75 Q67 77 70 78 Q73 77 75 75 Q73 72 70 75" fill="#FF69B4"/>
                                
                                <!-- ‡∏õ‡∏≤‡∏Å‡∏¢‡∏¥‡πâ‡∏°‡πÉ‡∏´‡∏ç‡πà -->
                                <path d="M55 85 Q70 95 85 85" stroke="#2C2C2C" stroke-width="3" fill="none" stroke-linecap="round"/>
                                
                                <!-- ‡πÅ‡∏Å‡πâ‡∏°‡πÅ‡∏î‡∏á‡πÉ‡∏´‡∏ç‡πà -->
                                <circle cx="40" cy="75" r="6" fill="#FFB6C1" opacity="0.8"/>
                                <circle cx="100" cy="75" r="6" fill="#FFB6C1" opacity="0.8"/>
                                
                                <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤‡∏≠‡πâ‡∏ß‡∏ô‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å -->
                                <circle cx="25" cy="70" r="10" fill="#F0F0F0" stroke="#E0E0E0" stroke-width="2"/>
                                <circle cx="115" cy="70" r="10" fill="#F0F0F0" stroke="#E0E0E0" stroke-width="2"/>
                                <circle cx="55" cy="115" r="10" fill="#F0F0F0" stroke="#E0E0E0" stroke-width="2"/>
                                <circle cx="85" cy="115" r="10" fill="#F0F0F0" stroke="#E0E0E0" stroke-width="2"/>
                                
                                <!-- ‡∏°‡∏∑‡∏≠‡πÄ‡∏ó‡πâ‡∏≤‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π -->
                                <circle cx="18" cy="65" r="5" fill="#FFB6C1"/>
                                <circle cx="122" cy="65" r="5" fill="#FFB6C1"/>
                                <circle cx="50" cy="122" r="5" fill="#FFB6C1"/>
                                <circle cx="90" cy="122" r="5" fill="#FFB6C1"/>
                                
                                <!-- ‡∏•‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏ö‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å -->
                                <circle cx="16" cy="63" r="1" fill="#FF69B4"/>
                                <circle cx="20" cy="63" r="1" fill="#FF69B4"/>
                                <circle cx="124" cy="63" r="1" fill="#FF69B4"/>
                                <circle cx="120" cy="63" r="1" fill="#FF69B4"/>
                                
                                <!-- ‡πÉ‡∏ö‡πÑ‡∏ú‡πà‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠ -->
                                <path d="M15 60 Q12 55 10 58 Q12 57 15 60" fill="#32CD32"/>
                                <path d="M125 60 Q128 55 130 58 Q128 57 125 60" fill="#32CD32"/>
                                
                                <!-- ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß -->
                                <path d="M30 30 Q28 27 25 30 Q28 33 30 35 Q32 33 35 30 Q32 27 30 30" fill="#FF69B4" opacity="0.6"/>
                                <path d="M110 35 Q108 32 105 35 Q108 38 110 40 Q112 38 115 35 Q112 32 110 35" fill="#FF69B4" opacity="0.6"/>
                                <path d="M20 100 Q18 97 15 100 Q18 103 20 105 Q22 103 25 100 Q22 97 20 100" fill="#FF69B4" opacity="0.6"/>
                                <path d="M120 105 Q118 102 115 105 Q118 108 120 110 Q122 108 125 105 Q122 102 120 105" fill="#FF69B4" opacity="0.6"/>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>
            
            <!-- Quick Stats -->
            <div class="glass-card rounded-3xl p-5 mb-8 w-full max-w-sm">
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div class="group">
                        <div class="text-2xl font-bold text-white mb-1 group-hover:scale-110 transition-transform" id="totalScore">0</div>
                        <div class="text-xs text-white/80">üåü ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    </div>
                    <div class="group">
                        <div class="text-2xl font-bold text-white mb-1 group-hover:scale-110 transition-transform" id="levelsCompleted">0</div>
                        <div class="text-xs text-white/80">üéØ ‡∏î‡πà‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô</div>
                    </div>
                    <div class="group">
                        <div class="text-2xl font-bold text-white mb-1 group-hover:scale-110 transition-transform" id="currentStreak">0</div>
                        <div class="text-xs text-white/80">üî• ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</div>
                    </div>
                </div>
            </div>
            
            <!-- Main Menu -->
            <div class="space-y-4 w-full max-w-sm">
                <!-- Primary Action -->
                <button onclick="showLevelSelect()" class="w-full glass-card hover:bg-white/25 text-white font-bold py-5 px-6 rounded-3xl text-xl shadow-2xl active:scale-95 transition-all duration-300 border-2 border-white/30 hover:border-white/50 group">
                    <div class="flex items-center justify-center space-x-3">
                        <span class="group-hover:animate-bounce">
                            <svg width="30" height="30" viewBox="0 0 30 30">
                                <g>
                                    <!-- ‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó‡πÄ‡∏•‡πá‡∏Å -->
                                    <path d="M15 5 L19 20 L11 20 Z" fill="#FF8C00"/>
                                    <path d="M13 5 Q11 2 9 4 Q11 3 13 5" fill="#32CD32"/>
                                    <path d="M17 5 Q19 2 21 4 Q19 3 17 5" fill="#32CD32"/>
                                    <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                                    <circle cx="13" cy="12" r="1" fill="#000"/>
                                    <circle cx="17" cy="12" r="1" fill="#000"/>
                                    <path d="M12 15 Q15 17 18 15" stroke="#000" stroke-width="1" fill="none"/>
                                    <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                                    <circle cx="8" cy="14" r="1.5" fill="#FFB366"/>
                                    <circle cx="22" cy="14" r="1.5" fill="#FFB366"/>
                                    <circle cx="12" cy="23" r="1.5" fill="#FFB366"/>
                                    <circle cx="18" cy="23" r="1.5" fill="#FFB366"/>
                                </g>
                            </svg>
                        </span>
                        <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</span>
                    </div>
                </button>
                
                <!-- Secondary Actions -->
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="showDailyChallenge()" class="glass-card hover:bg-white/20 text-white font-bold py-4 px-4 rounded-2xl text-sm shadow-xl active:scale-95 transition-all duration-300 group">
                        <div class="mb-1 group-hover:animate-pulse flex justify-center">
                            <svg width="25" height="25" viewBox="0 0 25 25">
                                <g>
                                    <!-- ‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î‡∏ï‡∏±‡∏ß -->
                                    <ellipse cx="12.5" cy="15" rx="4" ry="8" fill="#FFD700"/>
                                    <!-- ‡πÄ‡∏°‡∏•‡πá‡∏î‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î -->
                                    <circle cx="10" cy="10" r="1" fill="#FFA500"/>
                                    <circle cx="15" cy="10" r="1" fill="#FFA500"/>
                                    <circle cx="10" cy="13" r="1" fill="#FFA500"/>
                                    <circle cx="15" cy="13" r="1" fill="#FFA500"/>
                                    <circle cx="10" cy="16" r="1" fill="#FFA500"/>
                                    <circle cx="15" cy="16" r="1" fill="#FFA500"/>
                                    <circle cx="10" cy="19" r="1" fill="#FFA500"/>
                                    <circle cx="15" cy="19" r="1" fill="#FFA500"/>
                                    <!-- ‡πÉ‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î -->
                                    <path d="M8 8 Q6 5 4 7 Q6 6 8 8" fill="#228B22"/>
                                    <path d="M17 8 Q19 5 21 7 Q19 6 17 8" fill="#228B22"/>
                                    <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                                    <circle cx="10.5" cy="11.5" r="0.8" fill="#000"/>
                                    <circle cx="14.5" cy="11.5" r="0.8" fill="#000"/>
                                    <path d="M10 14 Q12.5 15.5 15 14" stroke="#000" stroke-width="0.8" fill="none"/>
                                    <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                                    <circle cx="6" cy="15" r="1.2" fill="#F0E68C"/>
                                    <circle cx="19" cy="15" r="1.2" fill="#F0E68C"/>
                                    <circle cx="10" cy="24" r="1.2" fill="#F0E68C"/>
                                    <circle cx="15" cy="24" r="1.2" fill="#F0E68C"/>
                                </g>
                            </svg>
                        </div>
                        <div>‡∏î‡πà‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
                    </button>
                    <button onclick="showRecipes()" class="glass-card hover:bg-white/20 text-white font-bold py-4 px-4 rounded-2xl text-sm shadow-xl active:scale-95 transition-all duration-300 group">
                        <div class="mb-1 group-hover:animate-pulse flex justify-center">
                            <svg width="25" height="25" viewBox="0 0 25 25">
                                <g>
                                    <!-- ‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ‡πà‡∏ï‡∏±‡∏ß -->
                                    <circle cx="12.5" cy="18" r="5" fill="#90EE90"/>
                                    <!-- ‡∏î‡∏≠‡∏Å‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ‡πà -->
                                    <circle cx="10" cy="15" r="1.5" fill="#228B22"/>
                                    <circle cx="15" cy="15" r="1.5" fill="#228B22"/>
                                    <circle cx="12.5" cy="12" r="1.5" fill="#228B22"/>
                                    <circle cx="8" cy="18" r="1.2" fill="#228B22"/>
                                    <circle cx="17" cy="18" r="1.2" fill="#228B22"/>
                                    <!-- ‡∏Å‡πâ‡∏≤‡∏ô‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ‡πà -->
                                    <rect x="11" y="18" width="3" height="5" fill="#8FBC8F" rx="1"/>
                                    <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                                    <circle cx="10.5" cy="16" r="0.8" fill="#000"/>
                                    <circle cx="14.5" cy="16" r="0.8" fill="#000"/>
                                    <path d="M10 19 Q12.5 20.5 15 19" stroke="#000" stroke-width="0.8" fill="none"/>
                                    <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                                    <circle cx="6" cy="18" r="1.2" fill="#98FB98"/>
                                    <circle cx="19" cy="18" r="1.2" fill="#98FB98"/>
                                    <circle cx="10" cy="25" r="1.2" fill="#98FB98"/>
                                    <circle cx="15" cy="25" r="1.2" fill="#98FB98"/>
                                </g>
                            </svg>
                        </div>
                        <div>‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
                    </button>
                </div>
                
                <!-- More Options -->
                <details class="glass-card rounded-2xl shadow-xl overflow-hidden">
                    <summary class="p-4 cursor-pointer text-center text-white font-medium hover:bg-white/10 transition-all">
                        <div class="flex items-center justify-center space-x-2">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <g>
                                    <!-- ‡πÄ‡∏´‡πá‡∏î‡∏ï‡∏±‡∏ß -->
                                    <ellipse cx="10" cy="15" rx="6" ry="3" fill="#DEB887"/>
                                    <ellipse cx="10" cy="8" rx="5" ry="4" fill="#8B4513"/>
                                    <!-- ‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡πÄ‡∏´‡πá‡∏î -->
                                    <circle cx="7" cy="7" r="0.8" fill="#FFF"/>
                                    <circle cx="13" cy="7" r="0.8" fill="#FFF"/>
                                    <circle cx="10" cy="5" r="0.6" fill="#FFF"/>
                                    <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                                    <circle cx="8" cy="9" r="0.6" fill="#000"/>
                                    <circle cx="12" cy="9" r="0.6" fill="#000"/>
                                    <path d="M8 11 Q10 12.5 12 11" stroke="#000" stroke-width="0.6" fill="none"/>
                                    <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                                    <circle cx="4" cy="12" r="1" fill="#F5DEB3"/>
                                    <circle cx="16" cy="12" r="1" fill="#F5DEB3"/>
                                    <circle cx="7" cy="18" r="1" fill="#F5DEB3"/>
                                    <circle cx="13" cy="18" r="1" fill="#F5DEB3"/>
                                </g>
                            </svg>
                            <span>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</span>
                            <span class="text-sm opacity-60">‚ñº</span>
                        </div>
                    </summary>
                    <div class="px-4 pb-4 space-y-2 bg-white/5">
                        <button onclick="showSustainabilityCalc()" class="w-full bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-4 rounded-xl text-sm shadow active:scale-95 transition-all">
                            üåø ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö
                        </button>
                        <button onclick="showLocalLeaderboard()" class="w-full bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-4 rounded-xl text-sm shadow active:scale-95 transition-all">
                            ü•á ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö
                        </button>
                        <button onclick="showAvatar()" class="w-full bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-4 rounded-xl text-sm shadow active:scale-95 transition-all">
                            ü•ï ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
                        </button>
                        <button onclick="showAchievements()" class="w-full bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-4 rounded-xl text-sm shadow active:scale-95 transition-all">
                            üèÜ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                        </button>
                        <button onclick="showSettings()" class="w-full bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-4 rounded-xl text-sm shadow active:scale-95 transition-all">
                            üîß ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                        </button>
                    </div>
                </details>
            </div>
            
            <!-- Daily Tip -->
            <div class="mt-6 glass-card rounded-2xl p-4 w-full max-w-sm text-center">
                <div class="mb-2 flex justify-center">
                    <svg width="25" height="25" viewBox="0 0 25 25">
                        <g>
                            <!-- ‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß -->
                            <rect x="11" y="15" width="3" height="6" fill="#8FBC8F" rx="1.5"/>
                            <!-- ‡πÉ‡∏ö‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô -->
                            <path d="M12.5 15 Q9 12 7 14 Q9 13 12.5 15" fill="#32CD32"/>
                            <path d="M12.5 15 Q16 12 18 14 Q16 13 12.5 15" fill="#32CD32"/>
                            <path d="M12.5 13 Q11 10 9 12 Q11 11 12.5 13" fill="#228B22"/>
                            <!-- ‡∏´‡∏ô‡πâ‡∏≤ -->
                            <circle cx="11.5" cy="17" r="0.6" fill="#000"/>
                            <circle cx="13.5" cy="17" r="0.6" fill="#000"/>
                            <path d="M11 19 Q12.5 20 14 19" stroke="#000" stroke-width="0.6" fill="none"/>
                            <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                            <circle cx="8" cy="18" r="1" fill="#9ACD32"/>
                            <circle cx="17" cy="18" r="1" fill="#9ACD32"/>
                            <circle cx="11" cy="23" r="1" fill="#9ACD32"/>
                            <circle cx="14" cy="23" r="1" fill="#9ACD32"/>
                        </g>
                    </svg>
                </div>
                <p class="text-sm text-white/90 leading-relaxed" id="dailyTip">ü•¨ ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏±‡∏Å‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏ñ‡∏∏‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÅ‡∏ó‡∏ô‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å ‡∏à‡∏∞‡∏™‡∏î‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô!</p>
            </div>
        </div>

        <!-- Level Select Screen -->
        <div id="levelSelectScreen" class="absolute inset-0 hidden">
            <div class="p-3">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="showStartScreen()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-full text-sm">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-lg font-bold text-green-800">üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô</h2>
                    <div></div>
                </div>
                
                <div class="grid grid-cols-3 gap-2 max-w-xs mx-auto" id="levelGrid">
                    <!-- Level buttons will be generated here -->
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="absolute inset-0 hidden flex flex-col">
            <!-- Header -->
            <div class="bg-white/90 backdrop-blur-sm p-4 flex justify-between items-center">
                <button onclick="showStartScreen()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">‚Üê ‡∏≠‡∏≠‡∏Å</button>
                <div class="flex items-center space-x-4 text-sm">
                    <div class="font-bold text-gray-800">‡∏î‡πà‡∏≤‡∏ô <span id="currentLevel" class="text-lg">1</span></div>
                    <div class="font-bold text-green-600">üå± <span id="ecoScore" class="text-lg">0</span></div>
                    <div class="font-bold text-blue-600">‚è∞ <span id="timer" class="text-lg">60</span></div>
                </div>
            </div>

            <!-- Power-ups Bar -->
            <div id="powerUpsBar" class="bg-gradient-to-r from-purple-100 to-pink-100 p-2 grid grid-cols-2 gap-1 text-xs">
                <button id="timeBoostBtn" onclick="usePowerUp('timeBoost')" class="bg-blue-500 hover:bg-blue-600 text-white px-1 py-1 rounded-full disabled:opacity-50" disabled>
                    ‚è∞ +30s (<span id="timeBoostCount">0</span>)
                </button>
                <button id="scoreMultiplierBtn" onclick="usePowerUp('scoreMultiplier')" class="bg-green-500 hover:bg-green-600 text-white px-1 py-1 rounded-full disabled:opacity-50" disabled>
                    ‚ú® x2 (<span id="scoreMultiplierCount">0</span>)
                </button>
                <button id="skipExtraBtn" onclick="usePowerUp('skipExtra')" class="bg-orange-500 hover:bg-orange-600 text-white px-1 py-1 rounded-full disabled:opacity-50" disabled>
                    ‚è≠Ô∏è ‡∏Ç‡πâ‡∏≤‡∏°+ (<span id="skipExtraCount">0</span>)
                </button>
                <button id="hintFreeBtn" onclick="usePowerUp('hintFree')" class="bg-yellow-500 hover:bg-yellow-600 text-white px-1 py-1 rounded-full disabled:opacity-50" disabled>
                    üí° ‡πÄ‡∏â‡∏•‡∏¢‡∏ü‡∏£‡∏µ (<span id="hintFreeCount">0</span>)
                </button>
            </div>

            <!-- Game Content -->
            <div class="flex-1 flex flex-col justify-center items-center p-3">
                <!-- Character Speech -->
                <div id="characterSpeech" class="bg-white rounded-xl p-3 mb-3 w-full max-w-xs text-center shadow-lg slide-up">
                    <div class="mb-2" id="characterEmoji">
                        <svg width="50" height="50" viewBox="0 0 50 50" class="mx-auto">
                            <g>
                                <!-- ‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó‡∏ï‡∏±‡∏ß -->
                                <path d="M25 8 L32 35 L18 35 Z" fill="#FF8C00" stroke="#FF6B00" stroke-width="1.5"/>
                                <!-- ‡∏•‡∏≤‡∏¢‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó -->
                                <path d="M21 18 L29 18" stroke="#FF6B00" stroke-width="1"/>
                                <path d="M20 25 L30 25" stroke="#FF6B00" stroke-width="1"/>
                                <path d="M21 32 L29 32" stroke="#FF6B00" stroke-width="1"/>
                                <!-- ‡πÉ‡∏ö‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó -->
                                <path d="M22 8 Q18 3 15 6 Q18 4 22 8" fill="#32CD32"/>
                                <path d="M25 6 Q21 1 18 4 Q21 2 25 6" fill="#228B22"/>
                                <path d="M28 8 Q32 3 35 6 Q32 4 28 8" fill="#32CD32"/>
                                <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å -->
                                <circle cx="22" cy="20" r="2" fill="#000"/>
                                <circle cx="28" cy="20" r="2" fill="#000"/>
                                <circle cx="22.5" cy="19.5" r="0.7" fill="#FFF"/>
                                <circle cx="28.5" cy="19.5" r="0.7" fill="#FFF"/>
                                <path d="M20 26 Q25 29 30 26" stroke="#000" stroke-width="1.5" fill="none"/>
                                <!-- ‡πÅ‡∏Å‡πâ‡∏°‡πÅ‡∏î‡∏á -->
                                <circle cx="17" cy="24" r="1.5" fill="#FF69B4" opacity="0.6"/>
                                <circle cx="33" cy="24" r="1.5" fill="#FF69B4" opacity="0.6"/>
                                <!-- ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤ -->
                                <circle cx="12" cy="25" r="2.5" fill="#FFB366"/>
                                <circle cx="38" cy="25" r="2.5" fill="#FFB366"/>
                                <circle cx="20" cy="42" r="2.5" fill="#FFB366"/>
                                <circle cx="30" cy="42" r="2.5" fill="#FFB366"/>
                                <!-- ‡∏°‡∏∑‡∏≠‡πÄ‡∏ó‡πâ‡∏≤ -->
                                <circle cx="9" cy="23" r="1.5" fill="#FFDAB9"/>
                                <circle cx="41" cy="23" r="1.5" fill="#FFDAB9"/>
                                <circle cx="17" cy="45" r="1.5" fill="#FFDAB9"/>
                                <circle cx="33" cy="45" r="1.5" fill="#FFDAB9"/>
                            </g>
                        </svg>
                    </div>
                    <p class="text-sm text-gray-800" id="speechText">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ! ‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó ‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞!</p>
                </div>

                <!-- Question Display -->
                <div id="questionDisplay" class="bg-white rounded-xl p-4 mb-4 w-full max-w-xs text-center shadow-lg hidden">
                    <div class="text-3xl mb-3" id="questionEmoji">ü§î</div>
                    <h3 class="text-base font-bold text-gray-800 mb-4 leading-relaxed" id="questionText"></h3>
                    <div class="space-y-3" id="answerOptions">
                        <!-- Answer buttons will be generated here -->
                    </div>
                </div>

                <!-- Knowledge Display -->
                <div id="knowledgeDisplay" class="bg-blue-50 rounded-xl p-4 mb-4 w-full max-w-xs text-center shadow-lg hidden">
                    <div class="text-3xl mb-3">üìö</div>
                    <h3 class="text-base font-bold text-blue-800 mb-3">üí° ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà!</h3>
                    <p class="text-sm text-gray-700 leading-relaxed" id="knowledgeText"></p>
                    <button onclick="continueToNextLevel()" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full text-sm">
                        ‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚Üí
                    </button>
                </div>

                <!-- Success Display -->
                <div id="successDisplay" class="bg-green-50 rounded-xl p-4 mb-4 w-full max-w-xs text-center shadow-lg hidden">
                    <div class="text-4xl mb-3">üéâ</div>
                    <h3 class="text-base font-bold text-green-800 mb-2">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h3>
                    <p class="text-sm text-green-700 mb-3" id="successMessage">‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡πÅ‡∏•‡πâ‡∏ß!</p>
                    <div class="bg-green-100 rounded-lg p-2 mb-3">
                        <div class="text-sm font-bold text-green-800">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ: <span id="scoreEarned">0</span></div>
                        <div class="text-xs text-green-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <span id="totalScoreDisplay">0</span></div>
                    </div>
                    <button onclick="showKnowledgeAfterSuccess()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full text-sm">
                        ‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ ‚Üí
                    </button>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="bg-white p-6 flex flex-wrap justify-center gap-4">
                <button id="hintBtn" onclick="showHint()" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-4 rounded-full text-sm">
                    üí° ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
                </button>
                <button id="skipBtn" onclick="skipLevel()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-full text-sm">
                    ‚è≠Ô∏è ‡∏Ç‡πâ‡∏≤‡∏° (<span id="skipCount">2</span>)
                </button>
                <div id="challengeModeIndicator" class="hidden bg-red-500 text-white font-bold py-1.5 px-2 rounded-full text-xs">
                    ‚öîÔ∏è ‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢
                </div>
                <div id="bossLevelIndicator" class="hidden bg-purple-500 text-white font-bold py-1.5 px-2 rounded-full text-xs">
                    üëë Boss Level
                </div>
                <div id="dailyChallengeIndicator" class="hidden bg-pink-500 text-white font-bold py-1.5 px-2 rounded-full text-xs">
                    üìÖ ‡∏î‡πà‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
                </div>
                <button id="retryBtn" onclick="retryLevel()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-1.5 px-2 rounded-full text-xs hidden">
                    üîÑ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>
        </div>

        <!-- Daily Challenge Screen -->
        <div id="dailyChallengeScreen" class="absolute inset-0 hidden bg-gradient-to-b from-pink-200 to-rose-200 overflow-y-auto">
            <div class="p-3">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="showStartScreen()" class="bg-rose-600 hover:bg-rose-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-lg font-bold text-rose-800">üìÖ ‡∏î‡πà‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h2>
                    <div></div>
                </div>
                
                <div class="bg-white rounded-xl p-3 shadow-lg text-center mb-3">
                    <div class="text-3xl mb-2" id="dailyChallengeEmoji">üåü</div>
                    <h3 class="text-base font-bold text-rose-800 mb-2" id="dailyChallengeTitle">‡∏î‡πà‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                    <p class="text-xs text-gray-700 mb-3" id="dailyChallengeDesc">‡∏ó‡∏≥‡∏î‡πà‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• Power-ups!</p>
                    
                    <div class="bg-rose-50 rounded-xl p-3 mb-3">
                        <h4 class="text-sm font-bold text-rose-800 mb-2">üéÅ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:</h4>
                        <div class="grid grid-cols-2 gap-1 text-xs" id="dailyRewards">
                            <div class="bg-blue-100 rounded-lg p-2">‚è∞ +30s x2</div>
                            <div class="bg-green-100 rounded-lg p-2">‚ú® x2 Score x1</div>
                            <div class="bg-orange-100 rounded-lg p-2">‚è≠Ô∏è Skip+ x1</div>
                            <div class="bg-yellow-100 rounded-lg p-2">üí° Free Hint x3</div>
                        </div>
                    </div>
                    
                    <button id="startDailyChallengeBtn" onclick="startDailyChallenge()" class="bg-rose-500 hover:bg-rose-600 text-white font-bold py-2 px-4 rounded-full text-sm">
                        üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πà‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
                    </button>
                    
                    <div id="dailyChallengeCompleted" class="hidden mt-3 p-2 bg-green-100 rounded-xl">
                        <div class="text-2xl mb-1">‚úÖ</div>
                        <p class="text-green-800 font-bold text-xs">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!</p>
                        <p class="text-green-600 text-xs">‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recipes Screen -->
        <div id="recipesScreen" class="absolute inset-0 hidden bg-gradient-to-b from-green-200 to-lime-200">
            <div class="h-full flex flex-col">
                <div class="flex items-center justify-between p-3 pb-2">
                    <button onclick="showStartScreen()" class="bg-lime-600 hover:bg-lime-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-base font-bold text-lime-800">üç≥ ‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
                    <div></div>
                </div>
                
                <div class="flex-1 overflow-y-auto px-3 pb-3">
                    <div class="grid grid-cols-1 gap-2" id="recipesList">
                        <!-- Recipes will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Sustainability Calculator Screen -->
        <div id="sustainabilityScreen" class="absolute inset-0 hidden bg-gradient-to-b from-teal-200 to-cyan-200 overflow-y-auto">
            <div class="p-3">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="showStartScreen()" class="bg-cyan-600 hover:bg-cyan-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-base font-bold text-cyan-800">üå± ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö</h2>
                    <div></div>
                </div>
                
                <div class="space-y-3">
                    <div class="bg-white rounded-xl p-3 shadow-lg text-center">
                        <div class="text-3xl mb-2">üåç</div>
                        <h3 class="text-base font-bold text-cyan-800 mb-2">‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                        
                        <div class="grid grid-cols-2 gap-2 mb-3">
                            <div class="bg-green-50 rounded-xl p-2">
                                <div class="text-lg mb-1">üå±</div>
                                <div class="text-base font-bold text-green-600" id="co2Saved">0</div>
                                <div class="text-xs text-gray-600">‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° CO‚ÇÇ ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î</div>
                            </div>
                            <div class="bg-blue-50 rounded-xl p-2">
                                <div class="text-lg mb-1">üíß</div>
                                <div class="text-base font-bold text-blue-600" id="waterSaved">0</div>
                                <div class="text-xs text-gray-600">‡∏•‡∏¥‡∏ï‡∏£‡∏ô‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î</div>
                            </div>
                            <div class="bg-yellow-50 rounded-xl p-2">
                                <div class="text-lg mb-1">üí∞</div>
                                <div class="text-base font-bold text-yellow-600" id="moneySaved">0</div>
                                <div class="text-xs text-gray-600">‡∏ö‡∏≤‡∏ó‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î</div>
                            </div>
                            <div class="bg-purple-50 rounded-xl p-2">
                                <div class="text-lg mb-1">üçé</div>
                                <div class="text-base font-bold text-purple-600" id="foodSaved">0</div>
                                <div class="text-xs text-gray-600">‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î</div>
                            </div>
                        </div>
                        
                        <div class="bg-cyan-50 rounded-xl p-3">
                            <h4 class="text-sm font-bold text-cyan-800 mb-2">üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢</h4>
                            <div class="text-left space-y-1 text-xs">
                                <p>‚Ä¢ ‡πÑ‡∏ó‡∏¢‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£ <strong>10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ô/‡∏õ‡∏µ</strong></p>
                                <p>‚Ä¢ ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô <strong>150 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°/‡∏Ñ‡∏ô/‡∏õ‡∏µ</strong></p>
                                <p>‚Ä¢ ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô <strong>400,000 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ</strong></p>
                                <p>‚Ä¢ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡πä‡∏≤‡∏ã‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏Å <strong>25 ‡∏•‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ô CO‚ÇÇ/‡∏õ‡∏µ</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Local Leaderboard Screen -->
        <div id="leaderboardScreen" class="absolute inset-0 hidden bg-gradient-to-b from-amber-200 to-yellow-200 overflow-y-auto">
            <div class="p-3">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="showStartScreen()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-lg font-bold text-yellow-800">üèÖ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</h2>
                    <div></div>
                </div>
                
                <div class="bg-white rounded-xl p-3 shadow-lg">
                    <div class="text-center mb-3">
                        <div class="text-4xl mb-2">üèÜ</div>
                        <h3 class="text-base font-bold text-yellow-800">Top 10 Food Waste Heroes</h3>
                    </div>
                    
                    <div class="space-y-2" id="leaderboardList">
                        <!-- Leaderboard will be generated here -->
                    </div>
                    
                    <div class="mt-3 p-2 bg-yellow-50 rounded-xl text-center">
                        <p class="text-yellow-800 font-bold text-sm">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="yourScore">0</span></p>
                        <p class="text-yellow-600 text-xs">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö: <span id="yourRank">-</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Avatar Customization Screen -->
        <div id="avatarScreen" class="absolute inset-0 hidden bg-gradient-to-b from-rose-200 to-pink-200 overflow-y-auto">
            <div class="p-3">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="showStartScreen()" class="bg-pink-600 hover:bg-pink-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-lg font-bold text-pink-800">üë§ ‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£</h2>
                    <div></div>
                </div>
                
                <div class="bg-white rounded-xl p-3 shadow-lg text-center mb-3">
                    <div class="text-4xl mb-2" id="currentAvatarDisplay">ü•ï</div>
                    <h3 class="text-base font-bold text-pink-800 mb-3">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                    
                    <div class="grid grid-cols-3 gap-2 mb-3" id="avatarGrid">
                        <!-- Avatar options will be generated here -->
                    </div>
                    
                    <div class="bg-pink-50 rounded-xl p-3">
                        <h4 class="text-sm font-bold text-pink-800 mb-2">üèÜ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà</h4>
                        <p class="text-pink-600 text-xs">‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievements Screen -->
        <div id="achievementsScreen" class="absolute inset-0 hidden bg-gradient-to-b from-purple-200 to-indigo-200">
            <div class="h-full flex flex-col">
                <div class="flex items-center justify-between p-3 pb-2">
                    <button onclick="showStartScreen()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-lg font-bold text-indigo-800">üèÜ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h2>
                    <div></div>
                </div>
                
                <div class="flex-1 overflow-y-auto px-3 pb-3">
                    <div class="grid grid-cols-1 gap-2" id="achievementsList">
                        <!-- Achievements will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settingsScreen" class="absolute inset-0 hidden bg-gradient-to-b from-gray-200 to-slate-200 overflow-y-auto">
            <div class="p-3">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="showStartScreen()" class="bg-slate-600 hover:bg-slate-700 text-white px-2 py-1.5 rounded-full text-xs">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2 class="text-base font-bold text-slate-800">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
                    <div></div>
                </div>
                
                <div class="space-y-3">
                    <!-- Theme Variations -->
                    <div class="bg-white rounded-xl p-3 shadow-lg">
                        <h3 class="text-sm font-bold text-slate-800 mb-2">üé® ‡∏ò‡∏µ‡∏°‡∏ï‡∏≤‡∏°‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="setThemeVariation('spring')" id="springThemeBtn" class="bg-green-100 border-2 border-green-300 rounded-lg p-2 text-center text-xs">
                                üå∏ ‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏ú‡∏•‡∏¥
                            </button>
                            <button onclick="setThemeVariation('summer')" id="summerThemeBtn" class="bg-yellow-100 border-2 border-yellow-300 rounded-lg p-2 text-center text-xs">
                                ‚òÄÔ∏è ‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô
                            </button>
                            <button onclick="setThemeVariation('autumn')" id="autumnThemeBtn" class="bg-orange-100 border-2 border-orange-300 rounded-lg p-2 text-center text-xs">
                                üçÇ ‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏£‡πà‡∏ß‡∏á
                            </button>
                            <button onclick="setThemeVariation('winter')" id="winterThemeBtn" class="bg-blue-100 border-2 border-blue-300 rounded-lg p-2 text-center text-xs">
                                ‚ùÑÔ∏è ‡∏§‡∏î‡∏π‡∏´‡∏ô‡∏≤‡∏ß
                            </button>
                        </div>
                    </div>
                    
                    <!-- Theme Settings -->
                    <div class="bg-white rounded-xl p-3 shadow-lg">
                        <h3 class="text-sm font-bold text-slate-800 mb-2">üé® ‡∏ò‡∏µ‡∏°</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="setTheme('light')" id="lightThemeBtn" class="bg-white border-2 border-blue-300 rounded-lg p-2 text-center text-xs">
                                ‚òÄÔ∏è ‡∏™‡∏ß‡πà‡∏≤‡∏á
                            </button>
                            <button onclick="setTheme('dark')" id="darkThemeBtn" class="bg-gray-800 border-2 border-gray-600 text-white rounded-lg p-2 text-center text-xs">
                                üåô ‡∏°‡∏∑‡∏î
                            </button>
                        </div>
                    </div>
                    
                    <!-- Language Settings -->
                    <div class="bg-white rounded-xl p-3 shadow-lg">
                        <h3 class="text-sm font-bold text-slate-800 mb-2">üåê ‡∏†‡∏≤‡∏©‡∏≤</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="setLanguage('th')" id="thaiLangBtn" class="bg-blue-500 text-white rounded-lg p-2 text-center text-xs">
                                üáπüá≠ ‡πÑ‡∏ó‡∏¢
                            </button>
                            <button onclick="setLanguage('en')" id="englishLangBtn" class="bg-gray-300 rounded-lg p-2 text-center text-xs">
                                üá∫üá∏ English
                            </button>
                        </div>
                    </div>
                    
                    <!-- Offline Mode -->
                    <div class="bg-white rounded-xl p-3 shadow-lg">
                        <h3 class="text-sm font-bold text-slate-800 mb-2">üì± ‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå</h3>
                        <div class="flex items-center justify-between">
                            <span class="text-xs">‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÄ‡∏ô‡πá‡∏ï</span>
                            <button onclick="toggleOfflineMode()" id="offlineModeBtn" class="bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded-full text-xs">
                                ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                            </button>
                        </div>
                    </div>
                    
                    <!-- Data Management -->
                    <div class="bg-white rounded-xl p-3 shadow-lg">
                        <h3 class="text-sm font-bold text-slate-800 mb-2">üíæ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                        <div class="space-y-2">
                            <button onclick="exportData()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 rounded-lg text-xs">
                                üì§ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                            </button>
                            <div class="relative">
                                <input type="file" id="importFile" accept=".json" class="hidden" onchange="importData(event)">
                                <button onclick="document.getElementById('importFile').click()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 rounded-lg text-xs">
                                    üì• ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                </button>
                            </div>
                            <button onclick="resetProgress()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 rounded-lg text-xs">
                                üóëÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            currentLevel: 1,
            ecoScore: 0,
            timer: 60,
            skipCount: 2,
            levelsCompleted: 0,
            correctAnswers: 0,
            timerInterval: null,
            unlockedLevels: 1,
            questionsAnswered: 0,
            currentStreak: 0,
            bestStreak: 0,
            challengeMode: false,
            challengeTimer: 30,
            achievements: [],
            dailyStreak: 0,
            lastPlayDate: null,
            weeklyStats: {
                questionsAnswered: 0,
                correctAnswers: 0,
                timeSpent: 0
            },
            monthlyStats: {
                questionsAnswered: 0,
                correctAnswers: 0,
                timeSpent: 0
            },
            theme: 'light',
            language: 'th',
            sessionStartTime: Date.now(),
            usedQuestions: [],
            availableQuestions: [],
            // New features
            dailyChallengeCompleted: false,
            lastDailyChallengeDate: null,
            powerUps: {
                timeBoost: 0,
                scoreMultiplier: 0,
                skipExtra: 0,
                hintFree: 0
            },
            currentAvatar: 'carrot',
            unlockedAvatars: ['carrot'],
            badges: [],
            currentThemeVariation: 'spring',
            localLeaderboard: [],
            sustainabilityScore: 0,
            recipesUnlocked: [],
            offlineMode: false,
            currentExplanation: ''
        };

        // Daily Tips System
        const dailyTips = [
            "ü•¨ ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏±‡∏Å‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏ñ‡∏∏‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÅ‡∏ó‡∏ô‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å ‡∏à‡∏∞‡∏™‡∏î‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô!",
            "üçå ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏î‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏Ç‡∏ô‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ",
            "ü•ï ‡πÉ‡∏ö‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏°‡∏≤‡∏ó‡∏≥‡∏™‡∏•‡∏±‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏±‡∏î‡πÑ‡∏î‡πâ ‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á!",
            "üçû ‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡πÜ ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£",
            "ü•î ‡πÄ‡∏Å‡πá‡∏ö‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏∑‡∏î‡πÄ‡∏¢‡πá‡∏ô ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏™‡πà‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô",
            "üçÖ ‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡∏™‡∏∏‡∏Å‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏´‡πâ‡∏≠‡∏á ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô",
            "üßÖ ‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏´‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏ó"
        ];

        // Recipes Database
        const recipes = [
            {
                id: 1,
                name: '‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏™‡∏∏‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô',
                ingredients: ['‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏™‡∏∏‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô 2 ‡∏•‡∏π‡∏Å', '‡∏ô‡∏°‡∏™‡∏î 1 ‡πÅ‡∏Å‡πâ‡∏ß', '‡∏ô‡πâ‡∏≥‡∏ú‡∏∂‡πâ‡∏á 1 ‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞', '‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á'],
                instructions: '‡∏õ‡∏±‡πà‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏ô‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏¢‡πá‡∏ô‡πÜ',
                icon: 'üçå',
                difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                time: '5 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 1
            },
            {
                id: 2,
                name: '‡∏ã‡∏∏‡∏õ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏±‡∏Å',
                ingredients: ['‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó', '‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á', '‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î', '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ'],
                instructions: '‡∏ï‡πâ‡∏°‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏±‡∏Å‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏ï‡∏≤‡∏°‡∏ä‡∏≠‡∏ö',
                icon: 'ü•ï',
                difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                time: '20 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 3
            },
            {
                id: 3,
                name: '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏õ‡∏¥‡πâ‡∏á‡∏Å‡∏£‡∏≠‡∏ö',
                ingredients: ['‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏Å‡πà‡∏≤', '‡πÄ‡∏ô‡∏¢', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', '‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£'],
                instructions: '‡∏´‡∏±‡πà‡∏ô‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô ‡∏ó‡∏≤‡πÄ‡∏ô‡∏¢‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏° ‡∏≠‡∏ö‡∏à‡∏ô‡∏Å‡∏£‡∏≠‡∏ö',
                icon: 'üçû',
                difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                time: '15 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 2
            },
            {
                id: 4,
                name: '‡πÅ‡∏¢‡∏°‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏∏‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô',
                ingredients: ['‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏∏‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô', '‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß'],
                instructions: '‡∏ï‡πâ‡∏°‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏à‡∏ô‡∏Ç‡πâ‡∏ô ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß',
                icon: 'üçì',
                difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                time: '30 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 5
            },
            {
                id: 5,
                name: '‡∏ú‡∏±‡∏î‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°',
                ingredients: ['‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤', '‡πÉ‡∏ö‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó', '‡πÉ‡∏ö‡∏ö‡∏µ‡∏ó', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢'],
                instructions: '‡∏ú‡∏±‡∏î‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡πÅ‡∏£‡∏á ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢',
                icon: 'ü•¨',
                difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                time: '10 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 4
            },
            {
                id: 6,
                name: '‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πâ‡∏°',
                ingredients: ['‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πâ‡∏°', '‡∏ô‡πâ‡∏≥', '‡∏ô‡πâ‡∏≥‡∏ú‡∏∂‡πâ‡∏á', '‡πÉ‡∏ö‡∏°‡∏¥‡πâ‡∏ô‡∏ï‡πå'],
                instructions: '‡∏ï‡πâ‡∏°‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πâ‡∏°‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥ ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡∏ú‡∏∂‡πâ‡∏á',
                icon: 'üçä',
                difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                time: '15 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 6
            },
            {
                id: 7,
                name: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å',
                ingredients: ['‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠', '‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÜ', '‡πÑ‡∏Ç‡πà', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢'],
                instructions: '‡∏ú‡∏±‡∏î‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡πÑ‡∏Ç‡πà ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏ï‡∏≤‡∏°‡∏ä‡∏≠‡∏ö',
                icon: 'üçö',
                difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                time: '15 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 7
            },
            {
                id: 8,
                name: '‡∏ä‡∏¥‡∏õ‡∏™‡πå‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á',
                ingredients: ['‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô', '‡πÄ‡∏Å‡∏•‡∏∑‡∏≠', '‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢'],
                instructions: '‡∏ó‡∏≠‡∏î‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡∏à‡∏ô‡∏Å‡∏£‡∏≠‡∏ö ‡πÇ‡∏£‡∏¢‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢',
                icon: 'ü•î',
                difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                time: '20 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 8
            },
            {
                id: 9,
                name: '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡∏ú‡∏±‡∏Å',
                ingredients: ['‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å', '‡∏Å‡πâ‡∏≤‡∏ô‡∏ú‡∏±‡∏Å', '‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°'],
                instructions: '‡∏ï‡πâ‡∏°‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å‡∏ô‡∏≤‡∏ô 2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏≠‡∏≤‡πÅ‡∏ï‡πà‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ',
                icon: 'üç≤',
                difficulty: '‡∏¢‡∏≤‡∏Å',
                time: '2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á',
                unlockLevel: 10
            },
            {
                id: 10,
                name: '‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥',
                ingredients: ['‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á', '‡∏ô‡∏°‡∏Ç‡πâ‡∏ô‡∏´‡∏ß‡∏≤‡∏ô', '‡∏ß‡∏ô‡∏¥‡∏•‡∏•‡∏≤'],
                instructions: '‡∏õ‡∏±‡πà‡∏ô‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏Å‡∏±‡∏ö‡∏ô‡∏°‡∏Ç‡πâ‡∏ô‡∏´‡∏ß‡∏≤‡∏ô ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏±‡∏ô‡∏ó‡∏µ',
                icon: 'üç¶',
                difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                time: '5 ‡∏ô‡∏≤‡∏ó‡∏µ',
                unlockLevel: 12
            }
        ];

        // Avatar System
        const avatars = [
            { id: 'carrot', emoji: 'ü•ï', name: '‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó', unlockCondition: 'default' },
            { id: 'tomato', emoji: 'üçÖ', name: '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®', unlockCondition: 'level_5' },
            { id: 'broccoli', emoji: 'ü•¶', name: '‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ‡πà', unlockCondition: 'level_10' },
            { id: 'corn', emoji: 'üåΩ', name: '‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î', unlockCondition: 'daily_challenge' },
            { id: 'eggplant', emoji: 'üçÜ', name: '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡∏¢‡∏≤‡∏ß', unlockCondition: 'boss_level' },
            { id: 'pepper', emoji: 'üå∂Ô∏è', name: '‡∏û‡∏£‡∏¥‡∏Å', unlockCondition: 'streak_10' },
            { id: 'avocado', emoji: 'ü•ë', name: '‡∏≠‡∏∞‡πÇ‡∏ß‡∏Ñ‡∏≤‡πÇ‡∏î', unlockCondition: 'recipe_master' },
            { id: 'mushroom', emoji: 'üçÑ', name: '‡πÄ‡∏´‡πá‡∏î', unlockCondition: 'eco_warrior' },
            { id: 'pumpkin', emoji: 'üéÉ', name: '‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á', unlockCondition: 'completionist' }
        ];

        // Boss Levels
        const bossLevels = [5, 10, 15];

        // Daily Challenge System
        const dailyChallenges = [
            {
                day: 0, // Sunday
                title: '‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡πå‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢',
                description: '‡∏ó‡∏≥‡∏î‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡πÉ‡∏´‡∏°‡πà',
                emoji: 'üòå',
                difficulty: 'easy',
                rewards: { timeBoost: 2, scoreMultiplier: 1, skipExtra: 1, hintFree: 3 }
            },
            {
                day: 1, // Monday
                title: '‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏û‡∏•‡∏±‡∏á‡πÄ‡∏ï‡πá‡∏°',
                description: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢!',
                emoji: 'üí™',
                difficulty: 'medium',
                rewards: { timeBoost: 1, scoreMultiplier: 2, skipExtra: 1, hintFree: 2 }
            },
            {
                day: 2, // Tuesday
                title: '‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ',
                description: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Food Waste',
                emoji: 'üìö',
                difficulty: 'medium',
                rewards: { timeBoost: 2, scoreMultiplier: 1, skipExtra: 2, hintFree: 1 }
            },
            {
                day: 3, // Wednesday
                title: '‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß',
                description: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°',
                emoji: '‚ö°',
                difficulty: 'hard',
                rewards: { timeBoost: 3, scoreMultiplier: 1, skipExtra: 0, hintFree: 2 }
            },
            {
                day: 4, // Thursday
                title: '‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå',
                description: '‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤',
                emoji: 'üé®',
                difficulty: 'medium',
                rewards: { timeBoost: 1, scoreMultiplier: 2, skipExtra: 1, hintFree: 2 }
            },
            {
                day: 5, // Friday
                title: '‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô',
                description: '‡∏à‡∏ö‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å!',
                emoji: 'üéâ',
                difficulty: 'easy',
                rewards: { timeBoost: 2, scoreMultiplier: 2, skipExtra: 2, hintFree: 1 }
            },
            {
                day: 6, // Saturday
                title: '‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢',
                description: '‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î',
                emoji: 'üî•',
                difficulty: 'hard',
                rewards: { timeBoost: 1, scoreMultiplier: 3, skipExtra: 0, hintFree: 1 }
            }
        ];

        // Theme Variations
        const themeVariations = {
            spring: {
                name: '‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏ú‡∏•‡∏¥',
                colors: ['#FFB6C1', '#98FB98', '#87CEEB'],
                background: 'linear-gradient(180deg, #FFB6C1 0%, #98FB98 100%)'
            },
            summer: {
                name: '‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô',
                colors: ['#FFD700', '#FFA500', '#FF6347'],
                background: 'linear-gradient(180deg, #FFD700 0%, #FFA500 100%)'
            },
            autumn: {
                name: '‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏£‡πà‡∏ß‡∏á',
                colors: ['#DEB887', '#CD853F', '#A0522D'],
                background: 'linear-gradient(180deg, #DEB887 0%, #CD853F 100%)'
            },
            winter: {
                name: '‡∏§‡∏î‡∏π‡∏´‡∏ô‡∏≤‡∏ß',
                colors: ['#B0E0E6', '#87CEEB', '#4682B4'],
                background: 'linear-gradient(180deg, #B0E0E6 0%, #87CEEB 100%)'
            }
        };

        // Game Levels
        const levels = [
            {
                id: 1,
                question: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
                options: ["‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏î", "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏≤‡∏£", "‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á"],
                correct: 0,
                explanation: "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏î‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏°‡∏≤‡∏Å ‡∏à‡∏∂‡∏á‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏´‡πâ‡∏á ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß",
                emoji: "üçé"
            },
            {
                id: 2,
                question: "‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏±‡∏Å‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏î‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô?",
                options: ["‡∏•‡πâ‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö", "‡∏´‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©", "‡∏ï‡∏≤‡∏Å‡πÅ‡∏î‡∏î", "‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á"],
                correct: 1,
                explanation: "‡∏Å‡∏≤‡∏£‡∏´‡πà‡∏≠‡∏ú‡∏±‡∏Å‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏à‡∏∞‡∏î‡∏π‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏î‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô",
                emoji: "ü•¨"
            },
            {
                id: 3,
                question: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏î‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
                options: ["‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ", "‡∏ó‡∏≥‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ", "‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡πà‡∏≠", "‡∏•‡πâ‡∏≤‡∏á‡∏ô‡πâ‡∏≥"],
                correct: 1,
                explanation: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏î‡∏≥‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏ô‡∏°",
                emoji: "üçå"
            },
            {
                id: 4,
                question: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ?",
                options: ["‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏•‡∏¢", "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏õ‡∏¥‡πâ‡∏á", "‡∏õ‡∏•‡∏π‡∏Å‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ", "‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç"],
                correct: 1,
                explanation: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÅ‡∏Ç‡πá‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏õ‡∏¥‡πâ‡∏á, breadcrumb ‡∏´‡∏£‡∏∑‡∏≠ crouton ‡πÑ‡∏î‡πâ",
                emoji: "üçû"
            },
            {
                id: 5,
                question: "‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ?",
                options: ["‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô", "‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢", "‡∏ó‡∏≠‡∏î‡∏Å‡∏¥‡∏ô", "‡∏ó‡∏±‡πâ‡∏á‡∏Ç‡πâ‡∏≠ 2 ‡πÅ‡∏•‡∏∞ 3"],
                correct: 3,
                explanation: "‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡∏ó‡∏≠‡∏î‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏ô‡∏°‡∏Å‡∏£‡∏≠‡∏ö‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢",
                emoji: "ü•î"
            },
            {
                id: 6,
                question: "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ",
                type: "sequence",
                items: [
                    "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà",
                    "‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
                    "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠",
                    "‡∏ã‡∏∑‡πâ‡∏≠‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
                    "‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ"
                ],
                correct: 0,
                explanation: "‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û",
                emoji: "üìù"
            },
            {
                id: 7,
                question: "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏±‡∏Å‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô (¬∞C)",
                type: "slider",
                min: -5,
                max: 15,
                correct: 4,
                tolerance: 2,
                unit: "¬∞C",
                explanation: "‡∏ú‡∏±‡∏Å‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ 2-6¬∞C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏ó‡∏≤‡∏á‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£",
                emoji: "ü•ï"
            },
            {
                id: 8,
                question: "‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°",
                type: "matching",
                leftItems: ["‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®", "‡∏Å‡∏•‡πâ‡∏ß‡∏¢", "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á", "‡∏ô‡∏°"],
                rightItems: ["‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", "‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô", "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏´‡πâ‡∏≠‡∏á", "‡∏ó‡∏µ‡πà‡πÅ‡∏´‡πâ‡∏á"],
                correctPairs: [[0,2], [1,2], [2,3], [3,1]],
                explanation: "‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏¢‡∏∑‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",
                emoji: "‚ùÑÔ∏è"
            },
            {
                id: 9,
                question: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏î‡∏±‡∏á‡∏†‡∏≤‡∏û",
                type: "image_choice",
                images: [
                    { emoji: "üçå", label: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏à‡∏∏‡∏î‡∏î‡∏≥" },
                    { emoji: "üçé", label: "‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß" },
                    { emoji: "ü•î", label: "‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡∏á‡∏≠‡∏Å" },
                    { emoji: "üçû", label: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏≤" }
                ],
                correct: 0,
                explanation: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏î‡∏≥‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏Ç‡∏ô‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ",
                emoji: "üçÖ"
            },
            {
                id: 10,
                question: "‡∏•‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏ú‡∏±‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°",
                type: "drag_drop",
                dropZones: ["üç≤ ‡∏ó‡∏≥‡∏ã‡∏∏‡∏õ", "ü•ó ‡∏ó‡∏≥‡∏™‡∏•‡∏±‡∏î", "üå± ‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢", "üóëÔ∏è ‡∏ó‡∏¥‡πâ‡∏á"],
                dragItems: ["‡πÉ‡∏ö‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó", "‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°", "‡∏Å‡πâ‡∏≤‡∏ô‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ‡πà", "‡∏£‡∏≤‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á"],
                correctMapping: [1, 2, 0, 3],
                explanation: "‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏ú‡∏±‡∏Å‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
                emoji: "ü•¨"
            },
            {
                id: 11,
                question: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏ô‡∏≤‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡∏µ‡πà‡πÄ‡∏î‡∏∑‡∏≠‡∏ô?",
                type: "slider",
                min: 1,
                max: 12,
                correct: 6,
                tolerance: 1,
                unit: " ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",
                explanation: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ 5-7 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÇ‡∏î‡∏¢‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥",
                emoji: "üßä"
            },
            {
                id: 12,
                question: "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Å‡πä‡∏≤‡∏ã‡πÄ‡∏≠‡∏ó‡∏¥‡∏•‡∏µ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢ (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)",
                type: "sequence",
                items: [
                    "üçå ‡∏Å‡∏•‡πâ‡∏ß‡∏¢",
                    "üçé ‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•", 
                    "ü•ë ‡∏≠‡∏∞‡πÇ‡∏ß‡∏Ñ‡∏≤‡πÇ‡∏î",
                    "üçä ‡∏™‡πâ‡∏°",
                    "üçá ‡∏≠‡∏á‡∏∏‡πà‡∏ô"
                ],
                correct: 0,
                explanation: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Å‡πä‡∏≤‡∏ã‡πÄ‡∏≠‡∏ó‡∏¥‡∏•‡∏µ‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏• ‡∏≠‡∏∞‡πÇ‡∏ß‡∏Ñ‡∏≤‡πÇ‡∏î ‡∏™‡πâ‡∏° ‡πÅ‡∏•‡∏∞‡∏≠‡∏á‡∏∏‡πà‡∏ô",
                emoji: "üçå"
            },
            {
                id: 13,
                question: "‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ú‡∏±‡∏Å‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î",
                type: "matching",
                leftItems: ["üßÖ ‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°", "ü•î ‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á", "ü•¨ ‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î", "üçÑ ‡πÄ‡∏´‡πá‡∏î"],
                rightItems: ["‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô", "‡∏ó‡∏µ‡πà‡∏°‡∏∑‡∏î‡πÄ‡∏¢‡πá‡∏ô", "‡∏ó‡∏µ‡πà‡πÅ‡∏´‡πâ‡∏á‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®", "‡∏´‡πà‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©"],
                correctPairs: [[0,2], [1,1], [2,3], [3,0]],
                explanation: "‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏±‡∏Å‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏¢‡∏∑‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",
                emoji: "üßÖ"
            },
            {
                id: 14,
                question: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ 1-2 ‡∏ß‡∏±‡∏ô",
                type: "image_choice",
                images: [
                    { emoji: "ü•õ", label: "‡∏ô‡∏°‡∏™‡∏î" },
                    { emoji: "üçû", label: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á" },
                    { emoji: "üêü", label: "‡∏õ‡∏•‡∏≤‡∏™‡∏î" },
                    { emoji: "ü•©", label: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏î" }
                ],
                correct: 1,
                explanation: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ 1-2 ‡∏ß‡∏±‡∏ô ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß ‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏î‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤",
                emoji: "üìÖ"
            },
            {
                id: 15,
                question: "‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Å‡∏µ‡πà‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô‡∏ï‡πà‡∏≠‡∏õ‡∏µ?",
                type: "slider",
                min: 50,
                max: 300,
                correct: 150,
                tolerance: 20,
                unit: " ‡∏Å‡∏Å./‡∏Ñ‡∏ô/‡∏õ‡∏µ",
                explanation: "‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 150 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô‡∏ï‡πà‡∏≠‡∏õ‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®",
                emoji: "üáπüá≠"
            }
        ];

        // Bonus Interactive Questions (for variety)
        const bonusQuestions = [
            {
                id: 16,
                question: "‡∏•‡∏≤‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°",
                type: "drag_drop",
                dropZones: ["üçå ‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ", "üçû ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏õ‡∏¥‡πâ‡∏á", "ü•ó ‡∏™‡∏•‡∏±‡∏î", "üç≤ ‡∏ã‡∏∏‡∏õ"],
                dragItems: ["‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏™‡∏∏‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô", "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÅ‡∏Ç‡πá‡∏á", "‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß", "‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏±‡∏Å"],
                correctMapping: [0, 1, 2, 3],
                explanation: "‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏°‡∏≤‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏á‡∏¥‡∏ô",
                emoji: "üç≥"
            },
            {
                id: 17,
                question: "‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Å‡∏Ç‡∏≠‡∏á‡∏≠‡∏∞‡πÇ‡∏ß‡∏Ñ‡∏≤‡πÇ‡∏î (1=‡πÅ‡∏Ç‡πá‡∏á, 10=‡∏ô‡∏¥‡πà‡∏°‡∏°‡∏≤‡∏Å)",
                type: "slider",
                min: 1,
                max: 10,
                correct: 6,
                tolerance: 1,
                unit: "/10",
                explanation: "‡∏≠‡∏∞‡πÇ‡∏ß‡∏Ñ‡∏≤‡πÇ‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏Å‡∏û‡∏≠‡∏î‡∏µ (‡∏£‡∏∞‡∏î‡∏±‡∏ö 5-7) ‡∏à‡∏∞‡∏ô‡∏¥‡πà‡∏°‡∏û‡∏≠‡∏Å‡∏î ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∞ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏¥‡∏ô",
                emoji: "ü•ë"
            },
            {
                id: 18,
                question: "‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
                type: "matching",
                leftItems: ["üçØ ‡∏ô‡πâ‡∏≥‡∏ú‡∏∂‡πâ‡∏á", "üßÑ ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°", "ü•ñ ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™", "üßÄ ‡∏ä‡∏µ‡∏™"],
                rightItems: ["‡∏´‡πà‡∏≠‡∏ü‡∏≠‡∏¢‡∏•‡πå", "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", "‡∏ó‡∏µ‡πà‡πÅ‡∏´‡πâ‡∏á", "‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡πà"],
                correctPairs: [[0,3], [1,2], [2,1], [3,0]],
                explanation: "‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏¢‡∏∑‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÑ‡∏î‡πâ‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô",
                emoji: "üì¶"
            },
            {
                id: 19,
                question: "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
                type: "sequence",
                items: [
                    "‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
                    "‡∏´‡∏±‡πà‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å",
                    "‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ö‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡πÅ‡∏´‡πâ‡∏á",
                    "‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏∑‡πâ‡∏ô",
                    "‡∏Ñ‡∏•‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏•‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
                    "‡πÑ‡∏î‡πâ‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"
                ],
                correct: 0,
                explanation: "‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏õ‡∏∏‡πã‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ",
                emoji: "üå±"
            },
            {
                id: 20,
                question: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏¢‡∏±‡∏á‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà",
                type: "image_choice",
                images: [
                    { emoji: "‚ú®", label: "‡πÄ‡∏á‡∏≤‡∏ß‡∏≤‡∏ß" },
                    { emoji: "ü§¢", label: "‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß" },
                    { emoji: "üü§", label: "‡∏™‡∏µ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô" },
                    { emoji: "ü¶†", label: "‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡∏•‡∏∑‡πà‡∏ô" }
                ],
                correct: 0,
                explanation: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏à‡∏∞‡∏°‡∏µ‡πÄ‡∏á‡∏≤‡∏ß‡∏≤‡∏ß ‡∏™‡∏µ‡∏™‡∏ß‡∏¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÅ‡∏õ‡∏•‡∏Å ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡∏•‡∏∑‡πà‡∏ô",
                emoji: "üëÄ"
            }
        ];

        // Knowledge Facts
        const knowledgeFacts = [
            "üåç ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô 1/3 ‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏¥‡∏ï",
            "üí∞ ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢‡∏°‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ 400,000 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡∏õ‡∏µ",
            "üå± ‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 1 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° = ‡∏•‡∏î CO‚ÇÇ ‡πÑ‡∏î‡πâ 3.3 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°",
            "ü•ï ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏¢‡∏™‡∏π‡∏á",
            "üçå ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏î‡∏≥‡∏°‡∏µ‡∏™‡∏≤‡∏£‡∏ï‡πâ‡∏≤‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏π‡∏•‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô",
            "ü•î ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡∏°‡∏µ‡πÇ‡∏õ‡πÅ‡∏ï‡∏™‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÉ‡∏ô",
            "üçû ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÅ‡∏Ç‡πá‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô breadcrumb ‡πÑ‡∏î‡πâ",
            "ü•¨ ‡πÉ‡∏ö‡∏ú‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏ó‡∏≤‡∏á‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£",
            "üçÖ ‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡∏™‡∏∏‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏°‡∏µ‡πÑ‡∏•‡πÇ‡∏Ñ‡∏õ‡∏µ‡∏ô‡∏™‡∏π‡∏á",
            "üßÖ ‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏á‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ",
            "üçé ‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Å‡πä‡∏≤‡∏ã‡πÄ‡∏≠‡∏ó‡∏¥‡∏•‡∏µ‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏≠‡∏∑‡πà‡∏ô‡∏™‡∏∏‡∏Å‡πÄ‡∏£‡πá‡∏ß",
            "ü•õ ‡∏ô‡∏°‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ 1-2 ‡∏ß‡∏±‡∏ô‡∏¢‡∏±‡∏á‡∏î‡∏∑‡πà‡∏°‡πÑ‡∏î‡πâ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß",
            "üçö ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î ‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏ô‡∏°",
            "ü•í ‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô‡∏à‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏´‡πâ‡∏≠‡∏á",
            "üçã ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏∞‡∏ô‡∏≤‡∏ß‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏°‡∏£‡∏∞‡πÄ‡∏´‡∏¢‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô C",
            "üåΩ ‡πÉ‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏°‡∏≤‡∏´‡πà‡∏≠‡∏Ç‡∏ô‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏ä‡∏≤",
            "ü•• ‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏£‡∏î‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏î‡πâ",
            "üçá ‡∏≠‡∏á‡∏∏‡πà‡∏ô‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡πÄ‡∏Å‡∏î",
            "ü•ñ ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏µ‡∏ö‡∏à‡∏∞‡∏ô‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà",
            "üßÑ ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏á‡∏≠‡∏Å‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏£‡∏™‡∏à‡∏∞‡∏≠‡πà‡∏≠‡∏ô‡∏•‡∏á",
            "üçä ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πâ‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î",
            "ü•¶ ‡∏Å‡πâ‡∏≤‡∏ô‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ‡πà‡∏´‡∏±‡πà‡∏ô‡∏ö‡∏≤‡∏á‡πÜ ‡∏ú‡∏±‡∏î‡∏Å‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏£‡πà‡∏≠‡∏¢",
            "üçó ‡πÄ‡∏®‡∏©‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡πÑ‡∏î‡πâ",
            "ü•ú ‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏á‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ñ‡∏±‡πà‡∏ß‡∏á‡∏≠‡∏Å‡∏Å‡∏¥‡∏ô",
            "üçÑ ‡πÄ‡∏´‡πá‡∏î‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏ã‡∏∏‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏±‡∏î‡πÑ‡∏î‡πâ",
            "üå∂Ô∏è ‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏´‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏ô‡∏≤‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",
            "ü•≠ ‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á‡∏î‡∏¥‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏™‡πâ‡∏°‡∏ï‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡∏á",
            "üçâ ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ï‡∏á‡πÇ‡∏°‡∏ó‡∏≥‡πÅ‡∏Å‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏±‡∏î‡πÑ‡∏î‡πâ",
            "ü•ï ‡πÉ‡∏ö‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏™‡πÇ‡∏ï‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏•‡∏±‡∏î",
            "üç† ‡∏°‡∏±‡∏ô‡πÄ‡∏ó‡∏®‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ"
        ];

        // Knowledge State
        let knowledgeState = {
            shownFacts: [],
            currentFactIndex: 0
        };

        // Achievements System
        const achievements = [
            {
                id: 'first_win',
                name: '‡∏Å‡πâ‡∏≤‡∏ß‡πÅ‡∏£‡∏Å',
                description: '‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏Å',
                icon: 'üå±',
                condition: () => gameState.levelsCompleted >= 1,
                unlocked: false
            },
            {
                id: 'speed_demon',
                name: '‡πÄ‡∏£‡πá‡∏ß‡∏õ‡∏≤‡∏ô‡∏ü‡πâ‡∏≤‡∏ú‡πà‡∏≤',
                description: '‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ',
                icon: '‚ö°',
                condition: () => false,
                unlocked: false
            },
            {
                id: 'streak_master',
                name: '‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á',
                description: '‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å 5 ‡∏Ç‡πâ‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô',
                icon: 'üî•',
                condition: () => gameState.currentStreak >= 5,
                unlocked: false
            },
            {
                id: 'perfectionist',
                name: '‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö',
                description: '‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ä‡πà‡∏ß‡∏¢',
                icon: 'üíé',
                condition: () => false,
                unlocked: false
            },
            {
                id: 'knowledge_seeker',
                name: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏î‡∏µ',
                description: '‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ñ‡∏£‡∏ö 10 ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á',
                icon: 'üìö',
                condition: () => knowledgeState.shownFacts.length >= 10,
                unlocked: false
            },
            {
                id: 'challenger',
                name: '‡∏ô‡∏±‡∏Å‡∏™‡∏π‡πâ',
                description: '‡∏ú‡πà‡∏≤‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ 3 ‡∏î‡πà‡∏≤‡∏ô',
                icon: 'üèÜ',
                condition: () => false,
                unlocked: false
            },
            {
                id: 'daily_player',
                name: '‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô',
                description: '‡πÄ‡∏•‡πà‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô 7 ‡∏ß‡∏±‡∏ô',
                icon: 'üìÖ',
                condition: () => gameState.dailyStreak >= 7,
                unlocked: false
            },
            {
                id: 'eco_warrior',
                name: '‡∏ô‡∏±‡∏Å‡∏£‡∏ö‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°',
                description: '‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° 3,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                icon: 'üåç',
                condition: () => gameState.ecoScore >= 3000,
                unlocked: false
            },
            {
                id: 'completionist',
                name: '‡∏ú‡∏π‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                description: '‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏î‡πà‡∏≤‡∏ô',
                icon: 'üëë',
                condition: () => gameState.levelsCompleted >= 15,
                unlocked: false
            },
            {
                id: 'no_skip_hero',
                name: '‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ',
                description: '‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏°‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Ç‡πâ‡∏≤‡∏°‡∏î‡πà‡∏≤‡∏ô',
                icon: 'üõ°Ô∏è',
                condition: () => gameState.levelsCompleted >= 15 && gameState.skipCount === 2,
                unlocked: false
            },
            // New achievements
            {
                id: 'daily_champion',
                name: '‡πÅ‡∏ä‡∏°‡∏õ‡πå‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô',
                description: '‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô 7 ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô',
                icon: 'üèÖ',
                condition: () => gameState.dailyStreak >= 7,
                unlocked: false
            },
            {
                id: 'boss_slayer',
                name: '‡∏ô‡∏±‡∏Å‡∏•‡πà‡∏≤‡∏ö‡∏≠‡∏™',
                description: '‡∏ú‡πà‡∏≤‡∏ô Boss Level ‡∏ó‡∏∏‡∏Å‡∏î‡πà‡∏≤‡∏ô',
                icon: 'üëë',
                condition: () => gameState.levelsCompleted >= 15,
                unlocked: false
            },
            {
                id: 'power_user',
                name: '‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç Power-up',
                description: '‡πÉ‡∏ä‡πâ Power-up ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó',
                icon: '‚ö°',
                condition: () => false,
                unlocked: false
            },
            {
                id: 'recipe_master',
                name: '‡πÄ‡∏ä‡∏ü‡∏°‡∏∑‡∏≠‡πÇ‡∏õ‡∏£',
                description: '‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 10 ‡∏™‡∏π‡∏ï‡∏£',
                icon: 'üë®‚Äçüç≥',
                condition: () => gameState.recipesUnlocked.length >= 10,
                unlocked: false
            },
            {
                id: 'sustainability_hero',
                name: '‡∏Æ‡∏µ‡πÇ‡∏£‡πà‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°',
                description: '‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î CO‚ÇÇ ‡πÑ‡∏î‡πâ 100 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°',
                icon: 'üåç',
                condition: () => gameState.sustainabilityScore >= 100,
                unlocked: false
            }
        ];

        // Screen Management
        function hideAllScreens() {
            const screens = ['startScreen', 'levelSelectScreen', 'gameScreen', 'achievementsScreen', 'settingsScreen', 'dailyChallengeScreen', 'recipesScreen', 'sustainabilityScreen', 'leaderboardScreen', 'avatarScreen'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
        }

        function showStartScreen() {
            hideAllScreens();
            document.getElementById('startScreen').classList.remove('hidden');
            updateStartScreenStats();
            showDailyTip();
        }

        function showLevelSelect() {
            hideAllScreens();
            document.getElementById('levelSelectScreen').classList.remove('hidden');
            generateLevelGrid();
        }

        function showAchievements() {
            hideAllScreens();
            document.getElementById('achievementsScreen').classList.remove('hidden');
            displayAchievements();
        }

        function showSettings() {
            hideAllScreens();
            document.getElementById('settingsScreen').classList.remove('hidden');
            updateSettingsDisplay();
        }

        // Daily Challenge System
        function showDailyChallenge() {
            hideAllScreens();
            document.getElementById('dailyChallengeScreen').classList.remove('hidden');
            updateDailyChallengeDisplay();
        }

        function checkDailyChallenge() {
            const today = new Date().toDateString();
            if (gameState.lastDailyChallengeDate !== today) {
                gameState.dailyChallengeCompleted = false;
                gameState.lastDailyChallengeDate = today;
                saveGameProgress();
            }
        }

        function updateDailyChallengeDisplay() {
            const today = new Date().getDay();
            const challenge = dailyChallenges[today];
            
            document.getElementById('dailyChallengeEmoji').textContent = challenge.emoji;
            document.getElementById('dailyChallengeTitle').textContent = challenge.title;
            document.getElementById('dailyChallengeDesc').textContent = challenge.description;
            
            // Update rewards display
            const rewardsContainer = document.getElementById('dailyRewards');
            rewardsContainer.innerHTML = `
                <div class="bg-blue-100 rounded-lg p-2">‚è∞ +30s x${challenge.rewards.timeBoost}</div>
                <div class="bg-green-100 rounded-lg p-2">‚ú® x2 Score x${challenge.rewards.scoreMultiplier}</div>
                <div class="bg-orange-100 rounded-lg p-2">‚è≠Ô∏è Skip+ x${challenge.rewards.skipExtra}</div>
                <div class="bg-yellow-100 rounded-lg p-2">üí° Free Hint x${challenge.rewards.hintFree}</div>
            `;
            
            // Show/hide completion status
            if (gameState.dailyChallengeCompleted) {
                document.getElementById('startDailyChallengeBtn').classList.add('hidden');
                document.getElementById('dailyChallengeCompleted').classList.remove('hidden');
            } else {
                document.getElementById('startDailyChallengeBtn').classList.remove('hidden');
                document.getElementById('dailyChallengeCompleted').classList.add('hidden');
            }
        }

        function startDailyChallenge() {
            gameState.challengeMode = true;
            gameState.currentLevel = 1;
            hideAllScreens();
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('dailyChallengeIndicator').classList.remove('hidden');
            initializeQuestionPool();
            loadRandomLevel();
            startTimer();
            updateUI();
        }

        function completeDailyChallenge() {
            const today = new Date().getDay();
            const challenge = dailyChallenges[today];
            
            // Award power-ups
            gameState.powerUps.timeBoost += challenge.rewards.timeBoost;
            gameState.powerUps.scoreMultiplier += challenge.rewards.scoreMultiplier;
            gameState.powerUps.skipExtra += challenge.rewards.skipExtra;
            gameState.powerUps.hintFree += challenge.rewards.hintFree;
            
            gameState.dailyChallengeCompleted = true;
            updatePowerUpDisplay();
            saveGameProgress();
            
            showCharacterSpeech('üéÅ', `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Power-ups ‡∏à‡∏≤‡∏Å‡∏î‡πà‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô!\n\n‚è∞ +30s x${challenge.rewards.timeBoost}\n‚ú® x2 Score x${challenge.rewards.scoreMultiplier}\n‚è≠Ô∏è Skip+ x${challenge.rewards.skipExtra}\nüí° Free Hint x${challenge.rewards.hintFree}`);
        }

        // Power-ups System
        function updatePowerUpDisplay() {
            document.getElementById('timeBoostCount').textContent = gameState.powerUps.timeBoost;
            document.getElementById('scoreMultiplierCount').textContent = gameState.powerUps.scoreMultiplier;
            document.getElementById('skipExtraCount').textContent = gameState.powerUps.skipExtra;
            document.getElementById('hintFreeCount').textContent = gameState.powerUps.hintFree;
            
            // Enable/disable buttons
            document.getElementById('timeBoostBtn').disabled = gameState.powerUps.timeBoost === 0;
            document.getElementById('scoreMultiplierBtn').disabled = gameState.powerUps.scoreMultiplier === 0;
            document.getElementById('skipExtraBtn').disabled = gameState.powerUps.skipExtra === 0;
            document.getElementById('hintFreeBtn').disabled = gameState.powerUps.hintFree === 0;
        }

        function usePowerUp(type) {
            if (gameState.powerUps[type] > 0) {
                gameState.powerUps[type]--;
                
                switch(type) {
                    case 'timeBoost':
                        gameState.timer += 30;
                        showCharacterSpeech('‚è∞', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ!');
                        break;
                    case 'scoreMultiplier':
                        showCharacterSpeech('‚ú®', '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ x2 ‡πÉ‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ!');
                        break;
                    case 'skipExtra':
                        skipLevel();
                        showCharacterSpeech('‚è≠Ô∏è', '‡∏Ç‡πâ‡∏≤‡∏°‡∏î‡πà‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Ç‡πâ‡∏≤‡∏°!');
                        break;
                    case 'hintFree':
                        showHint();
                        showCharacterSpeech('üí°', '‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡∏ü‡∏£‡∏µ!');
                        break;
                }
                
                updatePowerUpDisplay();
                updateUI();
                saveGameProgress();
            }
        }

        // Boss Level System
        function isBossLevel(level) {
            return bossLevels.includes(level);
        }

        function loadBossLevel(level) {
            document.getElementById('bossLevelIndicator').classList.remove('hidden');
            loadRandomLevel();
        }

        // Recipe System
        function showRecipes() {
            hideAllScreens();
            document.getElementById('recipesScreen').classList.remove('hidden');
            displayRecipes();
        }

        function displayRecipes() {
            const container = document.getElementById('recipesList');
            container.innerHTML = '';
            
            recipes.forEach(recipe => {
                const isUnlocked = gameState.levelsCompleted >= recipe.unlockLevel;
                const recipeDiv = document.createElement('div');
                recipeDiv.className = `bg-white rounded-xl p-3 shadow-lg ${isUnlocked ? '' : 'opacity-60'}`;
                
                recipeDiv.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl">${recipe.icon}</div>
                        <div class="flex-1">
                            <h3 class="text-sm font-bold text-lime-800 mb-1">${recipe.name}</h3>
                            <div class="flex items-center space-x-2 mb-2 text-xs text-gray-600">
                                <span>‚è±Ô∏è ${recipe.time}</span>
                                <span>üìä ${recipe.difficulty}</span>
                                ${isUnlocked ? '' : `<span class="text-red-500">üîí ‡∏î‡πà‡∏≤‡∏ô ${recipe.unlockLevel}</span>`}
                            </div>
                            ${isUnlocked ? `
                                <div class="mb-2">
                                    <h4 class="font-bold text-lime-700 mb-1 text-xs">‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö:</h4>
                                    <ul class="text-xs text-gray-700 list-disc list-inside">
                                        ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lime-700 mb-1 text-xs">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:</h4>
                                    <p class="text-xs text-gray-700">${recipe.instructions}</p>
                                </div>
                            ` : '<p class="text-gray-500 text-xs">‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏™‡∏π‡∏ï‡∏£‡∏ô‡∏µ‡πâ</p>'}
                        </div>
                    </div>
                `;
                
                container.appendChild(recipeDiv);
            });
        }

        function unlockRecipe(recipeId) {
            if (!gameState.recipesUnlocked.includes(recipeId)) {
                gameState.recipesUnlocked.push(recipeId);
                const recipe = recipes.find(r => r.id === recipeId);
                if (recipe) {
                    showCharacterSpeech('üç≥', `‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏™‡∏π‡∏ï‡∏£‡πÉ‡∏´‡∏°‡πà: ${recipe.name}!`);
                }
                saveGameProgress();
            }
        }

        // Sustainability Calculator
        function showSustainabilityCalc() {
            hideAllScreens();
            document.getElementById('sustainabilityScreen').classList.remove('hidden');
            updateSustainabilityDisplay();
        }

        function updateSustainabilityDisplay() {
            const co2Saved = Math.round(gameState.ecoScore * 0.1);
            const waterSaved = Math.round(gameState.ecoScore * 2);
            const moneySaved = Math.round(gameState.ecoScore * 0.5);
            const foodSaved = Math.round(gameState.ecoScore * 0.05);
            
            document.getElementById('co2Saved').textContent = co2Saved;
            document.getElementById('waterSaved').textContent = waterSaved;
            document.getElementById('moneySaved').textContent = moneySaved;
            document.getElementById('foodSaved').textContent = foodSaved;
            
            gameState.sustainabilityScore = co2Saved;
        }

        // Local Leaderboard
        function showLocalLeaderboard() {
            hideAllScreens();
            document.getElementById('leaderboardScreen').classList.remove('hidden');
            updateLeaderboard();
        }

        function updateLeaderboard() {
            const playerEntry = {
                name: `Player ${Date.now().toString().slice(-4)}`,
                score: gameState.ecoScore,
                avatar: gameState.currentAvatar,
                date: new Date().toLocaleDateString('th-TH')
            };
            
            const existingIndex = gameState.localLeaderboard.findIndex(entry => entry.name === playerEntry.name);
            if (existingIndex === -1) {
                gameState.localLeaderboard.push(playerEntry);
            } else if (gameState.localLeaderboard[existingIndex].score < playerEntry.score) {
                gameState.localLeaderboard[existingIndex] = playerEntry;
            }
            
            gameState.localLeaderboard.sort((a, b) => b.score - a.score);
            gameState.localLeaderboard = gameState.localLeaderboard.slice(0, 10);
            
            const container = document.getElementById('leaderboardList');
            container.innerHTML = '';
            
            gameState.localLeaderboard.forEach((entry, index) => {
                const entryDiv = document.createElement('div');
                entryDiv.className = `flex items-center justify-between p-2 rounded-xl ${index < 3 ? 'bg-gradient-to-r from-yellow-100 to-amber-100' : 'bg-gray-50'}`;
                
                const rankEmoji = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}`;
                const avatar = avatars.find(a => a.id === entry.avatar)?.emoji || 'ü•ï';
                
                entryDiv.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <span class="text-lg">${rankEmoji}</span>
                        <span class="text-lg">${avatar}</span>
                        <div>
                            <div class="font-bold text-sm">${entry.name}</div>
                            <div class="text-xs text-gray-600">${entry.date}</div>
                        </div>
                    </div>
                    <div class="text-base font-bold text-green-600">${entry.score}</div>
                `;
                
                container.appendChild(entryDiv);
            });
            
            const playerRank = gameState.localLeaderboard.findIndex(entry => entry.score <= gameState.ecoScore) + 1;
            document.getElementById('yourScore').textContent = gameState.ecoScore;
            document.getElementById('yourRank').textContent = playerRank || '‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Top 10';
            
            saveGameProgress();
        }

        // Avatar System
        function showAvatar() {
            hideAllScreens();
            document.getElementById('avatarScreen').classList.remove('hidden');
            displayAvatars();
        }

        function displayAvatars() {
            const container = document.getElementById('avatarGrid');
            container.innerHTML = '';
            
            document.getElementById('currentAvatarDisplay').textContent = avatars.find(a => a.id === gameState.currentAvatar)?.emoji || 'ü•ï';
            
            avatars.forEach(avatar => {
                const isUnlocked = gameState.unlockedAvatars.includes(avatar.id);
                const avatarBtn = document.createElement('button');
                avatarBtn.className = `p-2 rounded-xl border-2 transition-all ${
                    gameState.currentAvatar === avatar.id 
                        ? 'border-pink-500 bg-pink-100' 
                        : isUnlocked 
                            ? 'border-gray-300 bg-white hover:border-pink-300' 
                            : 'border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed'
                }`;
                
                avatarBtn.innerHTML = `
                    <div class="text-2xl mb-1">${avatar.emoji}</div>
                    <div class="text-xs font-medium">${avatar.name}</div>
                    ${!isUnlocked ? '<div class="text-xs text-gray-500 mt-1">üîí</div>' : ''}
                `;
                
                if (isUnlocked) {
                    avatarBtn.onclick = () => selectAvatar(avatar.id);
                }
                
                container.appendChild(avatarBtn);
            });
        }

        function selectAvatar(avatarId) {
            gameState.currentAvatar = avatarId;
            displayAvatars();
            saveGameProgress();
        }

        function unlockAvatar(avatarId) {
            if (!gameState.unlockedAvatars.includes(avatarId)) {
                gameState.unlockedAvatars.push(avatarId);
                const avatar = avatars.find(a => a.id === avatarId);
                if (avatar) {
                    showCharacterSpeech('üë§', `‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà: ${avatar.name} ${avatar.emoji}!`);
                }
                saveGameProgress();
            }
        }

        // Theme Variations
        function setThemeVariation(variation) {
            gameState.currentThemeVariation = variation;
            applyThemeVariation();
            updateSettingsDisplay();
            saveGameProgress();
        }

        function applyThemeVariation() {
            const container = document.querySelector('.game-container');
            const theme = themeVariations[gameState.currentThemeVariation];
            
            if (container && gameState.theme === 'light') {
                container.style.background = theme.background;
            }
            
            // Update theme variation buttons
            updateThemeVariationButtons();
        }
        
        function updateThemeVariationButtons() {
            const themeMap = {
                spring: { color: 'green', name: '‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏ú‡∏•‡∏¥' },
                summer: { color: 'yellow', name: '‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô' },
                autumn: { color: 'orange', name: '‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏£‡πà‡∏ß‡∏á' },
                winter: { color: 'blue', name: '‡∏§‡∏î‡∏π‡∏´‡∏ô‡∏≤‡∏ß' }
            };
            
            Object.keys(themeMap).forEach(key => {
                const btn = document.getElementById(`${key}ThemeBtn`);
                if (btn) {
                    const isActive = gameState.currentThemeVariation === key;
                    const colorClass = themeMap[key].color;
                    
                    btn.className = isActive
                        ? `bg-${colorClass}-200 border-2 border-${colorClass}-500 rounded-lg p-2 text-center text-xs font-bold`
                        : `bg-${colorClass}-100 border-2 border-${colorClass}-300 rounded-lg p-2 text-center text-xs hover:bg-${colorClass}-150`;
                }
            });
        }

        // Offline Mode
        function toggleOfflineMode() {
            gameState.offlineMode = !gameState.offlineMode;
            
            if (gameState.offlineMode) {
                enableOfflineMode();
            } else {
                disableOfflineMode();
            }
            
            updateSettingsDisplay();
            saveGameProgress();
        }

        function enableOfflineMode() {
            const offlineData = {
                levels: levels,
                achievements: achievements,
                recipes: recipes,
                avatars: avatars,
                knowledgeFacts: knowledgeFacts,
                dailyChallenges: dailyChallenges
            };
            
            localStorage.setItem('foodWasteHeroOfflineData', JSON.stringify(offlineData));
            document.getElementById('offlineModeBtn').textContent = '‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
            document.getElementById('offlineModeBtn').className = 'bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded-full text-xs';
        }

        function disableOfflineMode() {
            localStorage.removeItem('foodWasteHeroOfflineData');
            document.getElementById('offlineModeBtn').textContent = '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
            document.getElementById('offlineModeBtn').className = 'bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded-full text-xs';
        }

        // Game Logic
        function generateLevelGrid() {
            const grid = document.getElementById('levelGrid');
            grid.innerHTML = '';
            
            for (let i = 1; i <= 15; i++) {
                const button = document.createElement('button');
                const isUnlocked = i <= gameState.unlockedLevels;
                const isBoss = bossLevels.includes(i);
                
                button.className = `aspect-square rounded-xl font-bold text-sm transition-all ${
                    isUnlocked 
                        ? isBoss 
                            ? 'bg-purple-500 hover:bg-purple-600 text-white shadow-lg' 
                            : 'bg-green-500 hover:bg-green-600 text-white shadow-lg'
                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                }`;
                
                button.innerHTML = isBoss ? `üëë<br>${i}` : i;
                
                if (isUnlocked) {
                    button.onclick = () => startLevel(i);
                }
                
                grid.appendChild(button);
            }
        }

        function startLevel(level) {
            gameState.currentLevel = level;
            hideAllScreens();
            document.getElementById('gameScreen').classList.remove('hidden');
            
            if (isBossLevel(level)) {
                loadBossLevel(level);
            } else {
                loadRandomLevel();
            }
            
            startTimer();
            updateUI();
        }

        function initializeQuestionPool() {
            // Combine regular levels with bonus questions for variety
            gameState.availableQuestions = [...levels, ...bonusQuestions];
            gameState.usedQuestions = [];
        }

        function loadRandomLevel() {
            if (gameState.availableQuestions.length === 0) {
                initializeQuestionPool();
            }
            
            const randomIndex = Math.floor(Math.random() * gameState.availableQuestions.length);
            const selectedLevel = gameState.availableQuestions[randomIndex];
            
            gameState.availableQuestions.splice(randomIndex, 1);
            gameState.usedQuestions.push(selectedLevel);
            
            displayQuestion(selectedLevel);
        }

        function displayQuestion(level) {
            document.getElementById('characterSpeech').classList.add('hidden');
            document.getElementById('questionDisplay').classList.remove('hidden');
            document.getElementById('knowledgeDisplay').classList.add('hidden');
            document.getElementById('successDisplay').classList.add('hidden');
            
            document.getElementById('questionEmoji').textContent = level.emoji;
            document.getElementById('questionText').textContent = level.question;
            
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            // Handle different question types
            if (level.type === 'sequence') {
                displaySequenceQuestion(level, optionsContainer);
            } else if (level.type === 'slider') {
                displaySliderQuestion(level, optionsContainer);
            } else if (level.type === 'matching') {
                displayMatchingQuestion(level, optionsContainer);
            } else if (level.type === 'image_choice') {
                displayImageChoiceQuestion(level, optionsContainer);
            } else if (level.type === 'drag_drop') {
                displayDragDropQuestion(level, optionsContainer);
            } else {
                // Regular multiple choice question
                displayMultipleChoiceQuestion(level, optionsContainer);
            }
        }

        function displayMultipleChoiceQuestion(level, container) {
            if (!level.options || level.options.length === 0) {
                // If no options, create default ones
                level.options = ["‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å A", "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å B", "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å C", "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å D"];
                level.correct = 0;
            }
            
            level.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition-all text-sm bounce-in';
                button.style.animationDelay = `${index * 0.1}s`;
                button.textContent = option;
                button.onclick = () => selectAnswer(index, level.correct, level.explanation);
                container.appendChild(button);
            });
        }

        function displaySequenceQuestion(level, container) {
            const sequenceDiv = document.createElement('div');
            sequenceDiv.className = 'space-y-2';
            
            const instruction = document.createElement('p');
            instruction.className = 'text-sm text-gray-600 mb-3';
            instruction.textContent = '‡∏•‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:';
            sequenceDiv.appendChild(instruction);
            
            const itemsContainer = document.createElement('div');
            itemsContainer.className = 'space-y-2';
            itemsContainer.id = 'sequenceItems';
            
            level.items.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'bg-white border-2 border-blue-300 rounded-lg p-3 cursor-move hover:bg-blue-50 transition-all';
                itemDiv.draggable = true;
                itemDiv.textContent = item;
                itemDiv.dataset.originalIndex = index;
                
                itemDiv.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', index);
                    itemDiv.classList.add('opacity-50');
                });
                
                itemDiv.addEventListener('dragend', () => {
                    itemDiv.classList.remove('opacity-50');
                });
                
                itemDiv.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });
                
                itemDiv.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const draggedIndex = e.dataTransfer.getData('text/plain');
                    const draggedElement = itemsContainer.children[draggedIndex];
                    const targetElement = e.target.closest('[draggable="true"]');
                    
                    if (draggedElement && targetElement && draggedElement !== targetElement) {
                        const allItems = Array.from(itemsContainer.children);
                        const draggedPos = allItems.indexOf(draggedElement);
                        const targetPos = allItems.indexOf(targetElement);
                        
                        if (draggedPos < targetPos) {
                            targetElement.parentNode.insertBefore(draggedElement, targetElement.nextSibling);
                        } else {
                            targetElement.parentNode.insertBefore(draggedElement, targetElement);
                        }
                    }
                });
                
                itemsContainer.appendChild(itemDiv);
            });
            
            sequenceDiv.appendChild(itemsContainer);
            
            const submitBtn = document.createElement('button');
            submitBtn.className = 'w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg mt-4';
            submitBtn.textContent = '‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö';
            submitBtn.onclick = () => checkSequenceAnswer(level);
            sequenceDiv.appendChild(submitBtn);
            
            container.appendChild(sequenceDiv);
        }

        function displaySliderQuestion(level, container) {
            const sliderDiv = document.createElement('div');
            sliderDiv.className = 'space-y-4';
            
            const valueDisplay = document.createElement('div');
            valueDisplay.className = 'text-center text-2xl font-bold text-blue-600';
            valueDisplay.id = 'sliderValue';
            valueDisplay.textContent = Math.round((level.min + level.max) / 2) + (level.unit || '');
            
            const slider = document.createElement('input');
            slider.type = 'range';
            slider.min = level.min;
            slider.max = level.max;
            slider.value = Math.round((level.min + level.max) / 2);
            slider.className = 'w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer';
            slider.id = 'questionSlider';
            
            slider.addEventListener('input', (e) => {
                valueDisplay.textContent = e.target.value + (level.unit || '');
            });
            
            const submitBtn = document.createElement('button');
            submitBtn.className = 'w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg';
            submitBtn.textContent = '‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö';
            submitBtn.onclick = () => checkSliderAnswer(level);
            
            sliderDiv.appendChild(valueDisplay);
            sliderDiv.appendChild(slider);
            sliderDiv.appendChild(submitBtn);
            container.appendChild(sliderDiv);
        }

        function displayMatchingQuestion(level, container) {
            const matchingDiv = document.createElement('div');
            matchingDiv.className = 'space-y-4';
            
            const instruction = document.createElement('p');
            instruction.className = 'text-sm text-gray-600 mb-3';
            instruction.textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà:';
            matchingDiv.appendChild(instruction);
            
            const pairsContainer = document.createElement('div');
            pairsContainer.className = 'grid grid-cols-2 gap-2';
            pairsContainer.id = 'matchingPairs';
            
            let selectedLeft = null;
            let selectedRight = null;
            let matches = [];
            
            // Left column
            const leftColumn = document.createElement('div');
            leftColumn.className = 'space-y-2';
            level.leftItems.forEach((item, index) => {
                const itemBtn = document.createElement('button');
                itemBtn.className = 'w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm';
                itemBtn.textContent = item;
                itemBtn.onclick = () => selectLeftItem(index, itemBtn);
                leftColumn.appendChild(itemBtn);
            });
            
            // Right column
            const rightColumn = document.createElement('div');
            rightColumn.className = 'space-y-2';
            level.rightItems.forEach((item, index) => {
                const itemBtn = document.createElement('button');
                itemBtn.className = 'w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-3 rounded-lg text-sm';
                itemBtn.textContent = item;
                itemBtn.onclick = () => selectRightItem(index, itemBtn);
                rightColumn.appendChild(itemBtn);
            });
            
            function selectLeftItem(index, btn) {
                document.querySelectorAll('#matchingPairs .bg-blue-700').forEach(el => {
                    el.className = el.className.replace('bg-blue-700', 'bg-blue-500');
                });
                selectedLeft = index;
                btn.className = btn.className.replace('bg-blue-500', 'bg-blue-700');
                checkMatch();
            }
            
            function selectRightItem(index, btn) {
                document.querySelectorAll('#matchingPairs .bg-purple-700').forEach(el => {
                    el.className = el.className.replace('bg-purple-700', 'bg-purple-500');
                });
                selectedRight = index;
                btn.className = btn.className.replace('bg-purple-500', 'bg-purple-700');
                checkMatch();
            }
            
            function checkMatch() {
                if (selectedLeft !== null && selectedRight !== null) {
                    matches.push([selectedLeft, selectedRight]);
                    
                    // Reset selections
                    document.querySelectorAll('#matchingPairs .bg-blue-700').forEach(el => {
                        el.className = el.className.replace('bg-blue-700', 'bg-green-500');
                        el.disabled = true;
                    });
                    document.querySelectorAll('#matchingPairs .bg-purple-700').forEach(el => {
                        el.className = el.className.replace('bg-purple-700', 'bg-green-500');
                        el.disabled = true;
                    });
                    
                    selectedLeft = null;
                    selectedRight = null;
                    
                    if (matches.length === level.leftItems.length) {
                        setTimeout(() => checkMatchingAnswer(level, matches), 1000);
                    }
                }
            }
            
            pairsContainer.appendChild(leftColumn);
            pairsContainer.appendChild(rightColumn);
            matchingDiv.appendChild(pairsContainer);
            container.appendChild(matchingDiv);
        }

        function displayImageChoiceQuestion(level, container) {
            const gridDiv = document.createElement('div');
            gridDiv.className = 'grid grid-cols-2 gap-3';
            
            level.images.forEach((image, index) => {
                const button = document.createElement('button');
                button.className = 'bg-white border-2 border-gray-300 hover:border-blue-500 rounded-lg p-4 transition-all text-center';
                button.innerHTML = `
                    <div class="text-3xl mb-2">${image.emoji}</div>
                    <div class="text-sm font-medium">${image.label}</div>
                `;
                button.onclick = () => selectAnswer(index, level.correct, level.explanation);
                gridDiv.appendChild(button);
            });
            
            container.appendChild(gridDiv);
        }

        function displayDragDropQuestion(level, container) {
            const dragDropDiv = document.createElement('div');
            dragDropDiv.className = 'space-y-4';
            
            const instruction = document.createElement('p');
            instruction.className = 'text-sm text-gray-600 mb-3';
            instruction.textContent = '‡∏•‡∏≤‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°:';
            dragDropDiv.appendChild(instruction);
            
            // Drop zones
            const dropZonesDiv = document.createElement('div');
            dropZonesDiv.className = 'grid grid-cols-2 gap-2 mb-4';
            level.dropZones.forEach((zone, index) => {
                const dropZone = document.createElement('div');
                dropZone.className = 'border-2 border-dashed border-gray-400 rounded-lg p-3 min-h-16 text-center text-sm font-medium bg-gray-50';
                dropZone.textContent = zone;
                dropZone.dataset.zoneIndex = index;
                
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('border-blue-500', 'bg-blue-50');
                });
                
                dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('border-blue-500', 'bg-blue-50');
                });
                
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const draggedIndex = e.dataTransfer.getData('text/plain');
                    const draggedElement = document.querySelector(`[data-item-index="${draggedIndex}"]`);
                    
                    if (draggedElement) {
                        dropZone.appendChild(draggedElement);
                        dropZone.classList.remove('border-blue-500', 'bg-blue-50');
                        draggedElement.classList.remove('cursor-move');
                        draggedElement.classList.add('cursor-default');
                        draggedElement.draggable = false;
                    }
                });
                
                dropZonesDiv.appendChild(dropZone);
            });
            
            // Draggable items
            const itemsDiv = document.createElement('div');
            itemsDiv.className = 'grid grid-cols-2 gap-2';
            level.dragItems.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'bg-blue-500 text-white rounded-lg p-2 cursor-move text-sm font-medium text-center';
                itemDiv.textContent = item;
                itemDiv.draggable = true;
                itemDiv.dataset.itemIndex = index;
                
                itemDiv.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', index);
                    itemDiv.classList.add('opacity-50');
                });
                
                itemDiv.addEventListener('dragend', () => {
                    itemDiv.classList.remove('opacity-50');
                });
                
                itemsDiv.appendChild(itemDiv);
            });
            
            const submitBtn = document.createElement('button');
            submitBtn.className = 'w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg mt-4';
            submitBtn.textContent = '‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö';
            submitBtn.onclick = () => checkDragDropAnswer(level);
            
            dragDropDiv.appendChild(dropZonesDiv);
            dragDropDiv.appendChild(itemsDiv);
            dragDropDiv.appendChild(submitBtn);
            container.appendChild(dragDropDiv);
        }

        function checkSequenceAnswer(level) {
            const items = document.querySelectorAll('#sequenceItems > div');
            const userOrder = Array.from(items).map(item => parseInt(item.dataset.originalIndex));
            const isCorrect = JSON.stringify(userOrder) === JSON.stringify(level.items.map((_, i) => i));
            
            if (isCorrect) {
                levelComplete(level.explanation);
            } else {
                levelFailed(level.explanation);
            }
        }

        function checkSliderAnswer(level) {
            const slider = document.getElementById('questionSlider');
            const userValue = parseInt(slider.value);
            const isCorrect = Math.abs(userValue - level.correct) <= (level.tolerance || 0);
            
            if (isCorrect) {
                levelComplete(level.explanation);
            } else {
                levelFailed(level.explanation + ` (‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ${level.correct}${level.unit || ''})`);
            }
        }

        function checkMatchingAnswer(level, matches) {
            const correctPairs = level.correctPairs;
            let correctCount = 0;
            
            matches.forEach(match => {
                if (correctPairs.some(pair => pair[0] === match[0] && pair[1] === match[1])) {
                    correctCount++;
                }
            });
            
            if (correctCount === correctPairs.length) {
                levelComplete(level.explanation);
            } else {
                levelFailed(level.explanation);
            }
        }

        function checkDragDropAnswer(level) {
            const dropZones = document.querySelectorAll('[data-zone-index]');
            const userMapping = [];
            
            dropZones.forEach((zone, zoneIndex) => {
                const item = zone.querySelector('[data-item-index]');
                if (item) {
                    const itemIndex = parseInt(item.dataset.itemIndex);
                    userMapping[itemIndex] = zoneIndex;
                }
            });
            
            const isCorrect = JSON.stringify(userMapping) === JSON.stringify(level.correctMapping);
            
            if (isCorrect) {
                levelComplete(level.explanation);
            } else {
                levelFailed(level.explanation);
            }
        }

        function selectAnswer(selected, correct, explanation) {
            const buttons = document.querySelectorAll('#answerOptions button');
            
            buttons.forEach((button, index) => {
                button.disabled = true;
                if (index === correct) {
                    button.className = 'w-full bg-green-500 text-white font-bold py-3 px-4 rounded-lg text-sm';
                } else if (index === selected && selected !== correct) {
                    button.className = 'w-full bg-red-500 text-white font-bold py-3 px-4 rounded-lg text-sm';
                } else {
                    button.className = 'w-full bg-gray-400 text-white font-bold py-3 px-4 rounded-lg text-sm';
                }
            });
            
            setTimeout(() => {
                if (selected === correct) {
                    levelComplete(explanation);
                } else {
                    levelFailed(explanation);
                }
            }, 1500);
        }

        function levelComplete(explanation) {
            let baseScore = 100;
            let timeBonus = Math.max(0, gameState.timer - 30);
            let totalScore = baseScore + timeBonus;
            
            // Apply score multiplier power-up
            if (gameState.powerUps.scoreMultiplier > 0) {
                totalScore *= 2;
                gameState.powerUps.scoreMultiplier--;
                updatePowerUpDisplay();
            }
            
            gameState.ecoScore += totalScore;
            gameState.correctAnswers++;
            gameState.currentStreak++;
            gameState.questionsAnswered++;
            
            if (gameState.currentStreak > gameState.bestStreak) {
                gameState.bestStreak = gameState.currentStreak;
            }
            
            // Check if it's a boss level
            if (isBossLevel(gameState.currentLevel)) {
                unlockAvatar('eggplant');
            }
            
            // Check if it's daily challenge
            if (!document.getElementById('dailyChallengeIndicator').classList.contains('hidden')) {
                completeDailyChallenge();
            }
            
            // Unlock recipes based on level
            const recipe = recipes.find(r => r.unlockLevel === gameState.currentLevel);
            if (recipe) {
                unlockRecipe(recipe.id);
            }
            
            // Check avatar unlock conditions
            if (gameState.currentLevel === 5) unlockAvatar('tomato');
            if (gameState.currentLevel === 10) unlockAvatar('broccoli');
            if (gameState.currentStreak >= 10) unlockAvatar('pepper');
            
            if (gameState.currentLevel === gameState.unlockedLevels) {
                gameState.unlockedLevels++;
                gameState.levelsCompleted++;
            }
            
            // Store explanation for later use
            gameState.currentExplanation = explanation;
            
            // Show success screen first
            showSuccessScreen(totalScore);
            updateAchievements();
            updateLeaderboard();
            saveGameProgress();
        }

        function levelFailed(explanation) {
            gameState.currentStreak = 0;
            gameState.questionsAnswered++;
            showKnowledge(explanation);
            saveGameProgress();
        }

        function showSuccessScreen(scoreEarned) {
            document.getElementById('questionDisplay').classList.add('hidden');
            document.getElementById('knowledgeDisplay').classList.add('hidden');
            document.getElementById('successDisplay').classList.remove('hidden');
            
            document.getElementById('scoreEarned').textContent = scoreEarned;
            document.getElementById('totalScoreDisplay').textContent = gameState.ecoScore;
            
            // Check for special achievements
            let successMessage = '‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
            if (isBossLevel(gameState.currentLevel)) {
                successMessage = 'üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô Boss Level ‡πÅ‡∏•‡πâ‡∏ß!';
            } else if (gameState.currentStreak >= 5) {
                successMessage = 'üî• ‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô ' + gameState.currentStreak + ' ‡∏Ç‡πâ‡∏≠!';
            } else if (gameState.timer > 50) {
                successMessage = '‚ö° ‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å! ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ' + gameState.timer + ' ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ!';
            }
            
            document.getElementById('successMessage').textContent = successMessage;
        }

        function showKnowledgeAfterSuccess() {
            document.getElementById('successDisplay').classList.add('hidden');
            showKnowledge(gameState.currentExplanation);
        }

        function showKnowledge(explanation) {
            document.getElementById('questionDisplay').classList.add('hidden');
            document.getElementById('successDisplay').classList.add('hidden');
            document.getElementById('knowledgeDisplay').classList.remove('hidden');
            document.getElementById('knowledgeText').textContent = explanation;
            
            // Always show a random knowledge fact about food waste
            const randomFact = knowledgeFacts[Math.floor(Math.random() * knowledgeFacts.length)];
            if (!knowledgeState.shownFacts.includes(randomFact)) {
                knowledgeState.shownFacts.push(randomFact);
                document.getElementById('knowledgeText').textContent += '\n\nüí° ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ' + randomFact;
            } else {
                // If all facts have been shown, reset and show a random one
                if (knowledgeState.shownFacts.length >= knowledgeFacts.length) {
                    knowledgeState.shownFacts = [];
                }
                const newRandomFact = knowledgeFacts[Math.floor(Math.random() * knowledgeFacts.length)];
                document.getElementById('knowledgeText').textContent += '\n\nüí° ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ' + newRandomFact;
            }
        }

        function continueToNextLevel() {
    if (gameState.currentLevel < 15) {
        gameState.currentLevel++;               // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πà‡∏≤‡∏ô
        clearInterval(gameState.timerInterval); // ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πà‡∏≤
        initializeQuestionPool();               // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
        loadRandomLevel();                      // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
        startTimer();                          // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà
        updateUI();                            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï UI
    } else {
        showCharacterSpeech('üéâ', '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô Food Waste Hero ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á!');
        setTimeout(() => {
            showStartScreen();
        }, 3000);
    }
}

        function continueGame() {
            continueToNextLevel();
        }

        function showHint() {
            const currentQuestion = gameState.usedQuestions[gameState.usedQuestions.length - 1];
            if (currentQuestion) {
                // Show hint with additional food waste knowledge
                const randomFact = knowledgeFacts[Math.floor(Math.random() * knowledgeFacts.length)];
                const hintText = `üí° ‡πÄ‡∏â‡∏•‡∏¢: ${currentQuestion.explanation}\n\nüå± ${randomFact}`;
                showCharacterSpeech('üí°', hintText);
            }
        }

        function skipLevel() {
            if (gameState.skipCount > 0) {
                gameState.skipCount--;
                document.getElementById('skipCount').textContent = gameState.skipCount;
                continueGame();
                saveGameProgress();
            }
        }

        function retryLevel() {
            loadRandomLevel();
            document.getElementById('retryBtn').classList.add('hidden');
        }

        function showCharacterSpeech(emoji, text) {
            document.getElementById('characterEmoji').textContent = emoji;
            document.getElementById('speechText').textContent = text;
            document.getElementById('characterSpeech').classList.remove('hidden');
            document.getElementById('questionDisplay').classList.add('hidden');
            document.getElementById('knowledgeDisplay').classList.add('hidden');
        }

        function startTimer() {
            gameState.timer = gameState.challengeMode ? gameState.challengeTimer : 60;
            updateUI();
            
            gameState.timerInterval = setInterval(() => {
                gameState.timer--;
                updateUI();
                
                if (gameState.timer <= 0) {
                    clearInterval(gameState.timerInterval);
                    levelFailed("‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á");
                }
            }, 1000);
        }

        function updateUI() {
            document.getElementById('currentLevel').textContent = gameState.currentLevel;
            document.getElementById('ecoScore').textContent = gameState.ecoScore;
            document.getElementById('timer').textContent = gameState.timer;
            document.getElementById('skipCount').textContent = gameState.skipCount;
        }

        function updateStartScreenStats() {
            document.getElementById('totalScore').textContent = gameState.ecoScore;
            document.getElementById('levelsCompleted').textContent = gameState.levelsCompleted;
            document.getElementById('currentStreak').textContent = gameState.currentStreak;
        }

        function showDailyTip() {
            const today = new Date().getDay();
            const tip = dailyTips[today] || dailyTips[0];
            document.getElementById('dailyTip').textContent = tip;
        }

        function displayAchievements() {
            const container = document.getElementById('achievementsList');
            container.innerHTML = '';
            
            achievements.forEach(achievement => {
                const achievementDiv = document.createElement('div');
                achievementDiv.className = `bg-white rounded-xl p-3 shadow-lg ${achievement.unlocked ? 'border-2 border-yellow-400' : 'opacity-60'}`;
                
                achievementDiv.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="text-2xl">${achievement.icon}</div>
                        <div class="flex-1">
                            <h3 class="text-sm font-bold ${achievement.unlocked ? 'text-yellow-600' : 'text-gray-600'}">${achievement.name}</h3>
                            <p class="text-xs text-gray-600">${achievement.description}</p>
                            ${achievement.unlocked ? '<div class="text-green-600 font-bold mt-1 text-xs">‚úÖ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß</div>' : '<div class="text-gray-500 mt-1 text-xs">üîí ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ</div>'}
                        </div>
                    </div>
                `;
                
                container.appendChild(achievementDiv);
            });
        }

        function showAchievementNotification(icon, text) {
    const popup = document.getElementById('achievementPopup');
    document.getElementById('achievementIcon').textContent = icon;
    document.getElementById('achievementText').textContent = text;

    popup.classList.add('show');

    setTimeout(() => {
        popup.classList.remove('show');
    }, 3000);
}

        function updateAchievements() {
    achievements.forEach(achievement => {
        if (!achievement.unlocked && achievement.condition()) {
            achievement.unlocked = true;
            gameState.achievements.push(achievement.id);
            showAchievementNotification(achievement.icon, `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏´‡∏°‡πà: ${achievement.name}!`);
        }
    });
}

        function updateSettingsDisplay() {
            // Update theme buttons
            const lightBtn = document.getElementById('lightThemeBtn');
            const darkBtn = document.getElementById('darkThemeBtn');
            
            if (lightBtn) {
                lightBtn.className = gameState.theme === 'light' 
                    ? 'bg-blue-200 border-2 border-blue-500 rounded-lg p-2 text-center text-xs font-bold'
                    : 'bg-white border-2 border-blue-300 rounded-lg p-2 text-center text-xs hover:bg-blue-50';
            }
            
            if (darkBtn) {
                darkBtn.className = gameState.theme === 'dark'
                    ? 'bg-gray-600 border-2 border-gray-400 text-white rounded-lg p-2 text-center text-xs font-bold'
                    : 'bg-gray-800 border-2 border-gray-600 text-white rounded-lg p-2 text-center text-xs hover:bg-gray-700';
            }
            
            // Update language buttons
            const thaiBtn = document.getElementById('thaiLangBtn');
            const englishBtn = document.getElementById('englishLangBtn');
            
            if (thaiBtn) {
                thaiBtn.className = gameState.language === 'th'
                    ? 'bg-blue-600 text-white rounded-lg p-2 text-center text-xs font-bold'
                    : 'bg-blue-500 text-white rounded-lg p-2 text-center text-xs hover:bg-blue-600';
            }
            
            if (englishBtn) {
                englishBtn.className = gameState.language === 'en'
                    ? 'bg-blue-600 text-white rounded-lg p-2 text-center text-xs font-bold'
                    : 'bg-gray-300 rounded-lg p-2 text-center text-xs hover:bg-gray-400';
            }
            
            // Update theme variation buttons
            updateThemeVariationButtons();
            
            // Update offline mode button
            const offlineBtn = document.getElementById('offlineModeBtn');
            if (offlineBtn) {
                if (gameState.offlineMode) {
                    offlineBtn.textContent = '‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                    offlineBtn.className = 'bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded-full text-xs';
                } else {
                    offlineBtn.textContent = '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                    offlineBtn.className = 'bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded-full text-xs';
                }
            }
        }

        function setTheme(theme) {
            gameState.theme = theme;
            applyTheme();
            updateSettingsDisplay();
            saveGameProgress();
        }

        function applyTheme() {
            const body = document.body;
            const container = document.querySelector('.game-container');
            
            if (gameState.theme === 'dark') {
                body.classList.add('dark-theme');
                if (container) {
                    container.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
                }
            } else {
                body.classList.remove('dark-theme');
                if (container) {
                    // Apply current theme variation
                    const theme = themeVariations[gameState.currentThemeVariation];
                    container.style.background = theme.background;
                }
            }
        }

        function setLanguage(lang) {
            gameState.language = lang;
            updateSettingsDisplay();
            saveGameProgress();
        }

        function exportData() {
            try {
                const exportData = {
                    gameProgress: gameState,
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                const data = JSON.stringify(exportData, null, 2);
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `food-waste-hero-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showCharacterSpeech('üì§', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÑ‡∏ü‡∏•‡πå‡∏ñ‡∏π‡∏Å‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡πâ‡∏ß');
            } catch (error) {
                showCharacterSpeech('‚ùå', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                console.error('Export error:', error);
            }
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Validate imported data structure
                    if (importedData.gameProgress) {
                        // Merge imported data with current state
                        Object.assign(gameState, importedData.gameProgress);
                        
                        // Save the imported progress
                        saveGameProgress();
                        
                        // Apply imported settings
                        applyTheme();
                        applyThemeVariation();
                        updateSettingsDisplay();
                        updateStartScreenStats();
                        updatePowerUpDisplay();
                        
                        showCharacterSpeech('üì•', '‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß');
                        
                        // Reset file input
                        event.target.value = '';
                    } else {
                        throw new Error('Invalid data format');
                    }
                } catch (error) {
                    showCharacterSpeech('‚ùå', '‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà');
                    console.error('Import error:', error);
                    event.target.value = '';
                }
            };
            
            reader.readAsText(file);
        }

        function resetProgress() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) {
                localStorage.removeItem('foodWasteHeroProgress');
                showCharacterSpeech('üîÑ', '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà...');
                setTimeout(() => {
                    location.reload();
                }, 2000);
            }
        }

        // Save and Load Progress
        function saveGameProgress() {
            const progress = {
                unlockedLevels: gameState.unlockedLevels,
                ecoScore: gameState.ecoScore,
                levelsCompleted: gameState.levelsCompleted,
                correctAnswers: gameState.correctAnswers,
                questionsAnswered: gameState.questionsAnswered,
                currentStreak: gameState.currentStreak,
                bestStreak: gameState.bestStreak,
                achievements: gameState.achievements,
                dailyStreak: gameState.dailyStreak,
                lastPlayDate: gameState.lastPlayDate,
                weeklyStats: gameState.weeklyStats,
                monthlyStats: gameState.monthlyStats,
                theme: gameState.theme,
                language: gameState.language,
                dailyChallengeCompleted: gameState.dailyChallengeCompleted,
                lastDailyChallengeDate: gameState.lastDailyChallengeDate,
                powerUps: gameState.powerUps,
                currentAvatar: gameState.currentAvatar,
                unlockedAvatars: gameState.unlockedAvatars,
                badges: gameState.badges,
                currentThemeVariation: gameState.currentThemeVariation,
                localLeaderboard: gameState.localLeaderboard,
                sustainabilityScore: gameState.sustainabilityScore,
                recipesUnlocked: gameState.recipesUnlocked,
                offlineMode: gameState.offlineMode
            };
            localStorage.setItem('foodWasteHeroProgress', JSON.stringify(progress));
        }

        function loadGameProgress() {
            const saved = localStorage.getItem('foodWasteHeroProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                gameState.unlockedLevels = progress.unlockedLevels || 1;
                gameState.ecoScore = progress.ecoScore || 0;
                gameState.levelsCompleted = progress.levelsCompleted || 0;
                gameState.correctAnswers = progress.correctAnswers || 0;
                gameState.questionsAnswered = progress.questionsAnswered || 0;
                gameState.currentStreak = progress.currentStreak || 0;
                gameState.bestStreak = progress.bestStreak || 0;
                gameState.achievements = progress.achievements || [];
                gameState.dailyStreak = progress.dailyStreak || 0;
                gameState.lastPlayDate = progress.lastPlayDate || null;
                gameState.weeklyStats = progress.weeklyStats || {questionsAnswered: 0, correctAnswers: 0, timeSpent: 0};
                gameState.monthlyStats = progress.monthlyStats || {questionsAnswered: 0, correctAnswers: 0, timeSpent: 0};
                gameState.theme = progress.theme || 'light';
                gameState.language = progress.language || 'th';
                gameState.dailyChallengeCompleted = progress.dailyChallengeCompleted || false;
                gameState.lastDailyChallengeDate = progress.lastDailyChallengeDate || null;
                gameState.powerUps = progress.powerUps || {timeBoost: 0, scoreMultiplier: 0, skipExtra: 0, hintFree: 0};
                gameState.currentAvatar = progress.currentAvatar || 'carrot';
                gameState.unlockedAvatars = progress.unlockedAvatars || ['carrot'];
                gameState.badges = progress.badges || [];
                gameState.currentThemeVariation = progress.currentThemeVariation || 'spring';
                gameState.localLeaderboard = progress.localLeaderboard || [];
                gameState.sustainabilityScore = progress.sustainabilityScore || 0;
                gameState.recipesUnlocked = progress.recipesUnlocked || [];
                gameState.offlineMode = progress.offlineMode || false;
            }
        }

        // Initialize game
        function initGame() {
            loadGameProgress();
            applyTheme();
            applyThemeVariation();
            initializeQuestionPool();
            generateLevelGrid();
            checkDailyChallenge();
            updatePowerUpDisplay();
            showStartScreen();
            updateAchievements();
            
            if (gameState.offlineMode) {
                enableOfflineMode();
            }
        }

        // Initialize
        initGame();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9667ebee05602715',t:'MTc1Mzc0Mjg4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
